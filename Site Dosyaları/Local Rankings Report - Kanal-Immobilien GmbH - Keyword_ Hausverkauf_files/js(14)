!function(n){"use strict";function b(n){this.owner=n}function tt(n,t){if(Object.create)t.prototype=Object.create(n.prototype);else{var i=function(){};i.prototype=n.prototype;t.prototype=new i}return t.prototype.constructor=t,t}function k(n){var t=this.internal=new d(this);t.loadConfig(n);t.init(),function i(n,t,r){Object.keys(n).forEach(function(u){t[u]=n[u].bind(r);Object.keys(n[u]).length>0&&i(n[u],t[u],r)})}(r,this,this)}function d(t){var i=this;i.d3=n.d3?n.d3:"undefined"!=typeof require?require("d3"):void 0;i.api=t;i.config=i.getDefaultConfig();i.data={};i.cache={};i.axes={}}function u(n){b.call(this,n)}function g(n,t){function v(n,t){n.attr("transform",function(n){return"translate("+Math.ceil(t(n)+e)+", 0)"})}function y(n,t){n.attr("transform",function(n){return"translate(0,"+Math.ceil(t(n))+")"})}function k(n){var t=n[0],i=n[n.length-1];return i>t?[t,i]:[i,t]}function d(n){var i,r,t=[];if(n.ticks)return n.ticks.apply(n,a);for(r=n.domain(),i=Math.ceil(r[0]);i<r[1];i++)t.push(i);return t.length>0&&t[0]>0&&t.unshift(t[0]-(t[1]-t[0])),t}function g(){var n,i=u.copy();return t.isCategory&&(n=u.domain(),i.domain([n[0],n[1]-1])),i}function c(n){var t=l?l(n):n;return"undefined"!=typeof t?t:""}function nt(n){if(w)return w;var t={h:11.5,w:5.5};return n.select("text").text(c).each(function(n){var i=this.getBoundingClientRect(),r=c(n),u=i.height,f=r?i.width/r.length:void 0;u&&f&&(t.h=u,t.w=f)}).text(""),w=t,t}function p(i){return t.withoutTransition?i:n.transition(i)}function i(l){l.each(function(){function ri(n,i){function f(n,t){r=void 0;for(var u=1;u<t.length;u++)if(" "===t.charAt(u)&&(r=u),e=t.substr(0,u+1),o=dt.w*e.length,o>i)return f(n.concat(t.substr(0,r?r:u)),t.slice(r?r+1:u));return n.concat(t)}var e,r,o,u=c(n);return"[object Array]"===Object.prototype.toString.call(u)?u:((!i||0>=i)&&(i=ci?95:t.isCategory?Math.ceil(l(bt[1])-l(bt[0]))-12:110),f([],u+""))}function yt(n,t){var i=dt.h;return 0===t&&(i="left"===o||"right"===o?-((ti[n.index]-1)*(dt.h/2)-3):".71em"),i}function ui(n){var t=u(n)+(s?0:e);return a[0]<t&&t<a[1]?f:0}function fi(n){return n?n>0?"start":"end":"middle"}function ei(n){return n?"rotate("+n+")":""}function oi(n){return n?8*Math.sin(Math.PI*(n/180)):0}function si(n){return n?11.5-2.5*(n/15)*(n>0?1:-1):w}var it,et,pt,wt=i.g=n.select(this),ot=this.__chart__||u,l=this.__chart__=g(),bt=h?h:d(l),st=wt.selectAll(".tick").data(bt,l),rt=st.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),hi=st.exit().remove(),kt=p(st).style("opacity",1),a=u.rangeExtent?u.rangeExtent():k(u.range()),ni=wt.selectAll(".domain").data([0]),ht=(ni.enter().append("path").attr("class","domain"),p(ni)),ft,gt,ii;rt.append("line");rt.append("text");var ct=rt.select("line"),lt=kt.select("line"),at=rt.select("text"),vt=kt.select("text");t.isCategory?(e=Math.ceil((l(1)-l(0))/2),et=s?0:e,pt=s?e:0):e=et=0;var ut,b,dt=nt(wt.select(".tick")),ti=[],w=Math.max(f,0)+tt,ci="left"===o||"right"===o;ut=st.select("text");b=ut.selectAll("tspan").data(function(n,i){var r=t.tickMultiline?ri(n,t.tickWidth):[].concat(c(n));return ti[i]=r.length,r.map(function(n){return{index:i,splitted:n}})});b.enter().append("tspan");b.exit().remove();b.text(function(n){return n.splitted});ft=t.tickTextRotate;switch(o){case"bottom":it=v;ct.attr("y2",f);at.attr("y",w);lt.attr("x1",et).attr("x2",et).attr("y2",ui);vt.attr("x",0).attr("y",si(ft)).style("text-anchor",fi(ft)).attr("transform",ei(ft));b.attr("x",0).attr("dy",yt).attr("dx",oi(ft));ht.attr("d","M"+a[0]+","+r+"V0H"+a[1]+"V"+r);break;case"top":it=v;ct.attr("y2",-f);at.attr("y",-w);lt.attr("x2",0).attr("y2",-f);vt.attr("x",0).attr("y",-w);ut.style("text-anchor","middle");b.attr("x",0).attr("dy","0em");ht.attr("d","M"+a[0]+","+-r+"V0H"+a[1]+"V"+-r);break;case"left":it=y;ct.attr("x2",-f);at.attr("x",-w);lt.attr("x2",-f).attr("y1",pt).attr("y2",pt);vt.attr("x",-w).attr("y",e);ut.style("text-anchor","end");b.attr("x",-w).attr("dy",yt);ht.attr("d","M"+-r+","+a[0]+"H0V"+a[1]+"H"+-r);break;case"right":it=y;ct.attr("x2",f);at.attr("x",w);lt.attr("x2",f).attr("y2",0);vt.attr("x",w).attr("y",0);ut.style("text-anchor","start");b.attr("x",w).attr("dy",yt);ht.attr("d","M"+r+","+a[0]+"H0V"+a[1]+"H"+r)}l.rangeBand?(gt=l,ii=gt.rangeBand()/2,ot=l=function(n){return gt(n)+ii}):ot.rangeBand?ot=l:hi.call(it,l);rt.call(it,ot);kt.call(it,l)})}var r,l,a,s,u=n.scale.linear(),o="bottom",f=6,tt=3,h=null,e=0,b=!0;return t=t||{},r=t.withOuterTick?6:0,i.scale=function(n){return arguments.length?(u=n,i):u},i.orient=function(n){return arguments.length?(o=n in{top:1,right:1,bottom:1,left:1}?n+"":"bottom",i):o},i.tickFormat=function(n){return arguments.length?(l=n,i):l},i.tickCentered=function(n){return arguments.length?(s=n,i):s},i.tickOffset=function(){return e},i.tickInterval=function(){var n,u;return t.isCategory?n=2*e:(u=i.g.select("path.domain").node().getTotalLength()-2*r,n=u/i.g.selectAll("line").size()),1/0===n?0:n},i.ticks=function(){return arguments.length?(a=arguments,i):a},i.tickCulling=function(n){return arguments.length?(b=n,i):b},i.tickValues=function(n){if("function"==typeof n)h=function(){return n(u.domain())};else{if(!arguments.length)return h;h=n}return i},i}var r,t,it,l={version:"0.4.10"},i,w;l.generate=function(n){return new k(n)};l.chart={fn:k.prototype,internal:{fn:d.prototype,axis:{fn:u.prototype}}};r=l.chart.fn;t=l.chart.internal.fn;it=l.chart.internal.axis.fn;t.init=function(){var t=this,n=t.config;if(t.initParams(),n.data_url)t.convertUrlToData(n.data_url,n.data_mimeType,n.data_keys,t.initWithData);else if(n.data_json)t.initWithData(t.convertJsonToData(n.data_json,n.data_keys));else if(n.data_rows)t.initWithData(t.convertRowsToData(n.data_rows));else{if(!n.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(n.data_columns))}};t.initParams=function(){var n=this,i=n.d3,t=n.config;n.clipId="c3-"+ +new Date+"-clip";n.clipIdForXAxis=n.clipId+"-xaxis";n.clipIdForYAxis=n.clipId+"-yaxis";n.clipIdForGrid=n.clipId+"-grid";n.clipIdForSubchart=n.clipId+"-subchart";n.clipPath=n.getClipPath(n.clipId);n.clipPathForXAxis=n.getClipPath(n.clipIdForXAxis);n.clipPathForYAxis=n.getClipPath(n.clipIdForYAxis);n.clipPathForGrid=n.getClipPath(n.clipIdForGrid);n.clipPathForSubchart=n.getClipPath(n.clipIdForSubchart);n.dragStart=null;n.dragging=!1;n.flowing=!1;n.cancelClick=!1;n.mouseover=!1;n.transiting=!1;n.color=n.generateColor();n.levelColor=n.generateLevelColor();n.dataTimeFormat=t.data_xLocaltime?i.time.format:i.time.format.utc;n.axisTimeFormat=t.axis_x_localtime?i.time.format:i.time.format.utc;n.defaultAxisTimeFormat=n.axisTimeFormat.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%-m/%-d",function(n){return n.getDay()&&1!==n.getDate()}],["%-m/%-d",function(n){return 1!==n.getDate()}],["%-m/%-d",function(n){return n.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]);n.hiddenTargetIds=[];n.hiddenLegendIds=[];n.focusedTargetIds=[];n.defocusedTargetIds=[];n.xOrient=t.axis_rotated?"left":"bottom";n.yOrient=t.axis_rotated?t.axis_y_inner?"top":"bottom":t.axis_y_inner?"right":"left";n.y2Orient=t.axis_rotated?t.axis_y2_inner?"bottom":"top":t.axis_y2_inner?"left":"right";n.subXOrient=t.axis_rotated?"left":"bottom";n.isLegendRight="right"===t.legend_position;n.isLegendInset="inset"===t.legend_position;n.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor;n.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor;n.legendStep=0;n.legendItemWidth=0;n.legendItemHeight=0;n.currentMaxTickWidths={x:0,y:0,y2:0};n.rotated_padding_left=30;n.rotated_padding_right=t.axis_rotated&&!t.axis_x_show?0:30;n.rotated_padding_top=5;n.withoutFadeIn={};n.intervalForObserveInserted=void 0;n.axes.subx=i.selectAll([])};t.initChartElements=function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};t.initWithData=function(t){var e,o,r=this,s=r.d3,f=r.config,h=!0;r.axis=new u(r);r.initPie&&r.initPie();r.initBrush&&r.initBrush();r.initZoom&&r.initZoom();r.selectChart=f.bindto?"function"==typeof f.bindto.node?f.bindto:s.select(f.bindto):s.selectAll([]);r.selectChart.empty()&&(r.selectChart=s.select(document.createElement("div")).style("opacity",0),r.observeInserted(r.selectChart),h=!1);r.selectChart.html("").classed("c3",!0);r.data.xs={};r.data.targets=r.convertDataToTargets(t);f.data_filter&&(r.data.targets=r.data.targets.filter(f.data_filter));f.data_hide&&r.addHiddenTargetIds(f.data_hide===!0?r.mapToIds(r.data.targets):f.data_hide);f.legend_hide&&r.addHiddenLegendIds(f.legend_hide===!0?r.mapToIds(r.data.targets):f.legend_hide);r.hasType("gauge")&&(f.legend_show=!1);r.updateSizes();r.updateScales();r.x.domain(s.extent(r.getXDomain(r.data.targets)));r.y.domain(r.getYDomain(r.data.targets,"y"));r.y2.domain(r.getYDomain(r.data.targets,"y2"));r.subX.domain(r.x.domain());r.subY.domain(r.y.domain());r.subY2.domain(r.y2.domain());r.orgXDomain=r.x.domain();r.brush&&r.brush.scale(r.subX);f.zoom_enabled&&r.zoom.scale(r.x);r.svg=r.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return f.onmouseover.call(r)}).on("mouseleave",function(){return f.onmouseout.call(r)});e=r.svg.append("defs");r.clipChart=r.appendClip(e,r.clipId);r.clipXAxis=r.appendClip(e,r.clipIdForXAxis);r.clipYAxis=r.appendClip(e,r.clipIdForYAxis);r.clipGrid=r.appendClip(e,r.clipIdForGrid);r.clipSubchart=r.appendClip(e,r.clipIdForSubchart);r.updateSvgSize();o=r.main=r.svg.append("g").attr("transform",r.getTranslate("main"));r.initSubchart&&r.initSubchart();r.initTooltip&&r.initTooltip();r.initLegend&&r.initLegend();o.append("text").attr("class",i.text+" "+i.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");r.initRegion();r.initGrid();o.append("g").attr("clip-path",r.clipPath).attr("class",i.chart);f.grid_lines_front&&r.initGridLines();r.initEventRect();r.initChartElements();o.insert("rect",f.zoom_privileged?null:"g."+i.regions).attr("class",i.zoomRect).attr("width",r.width).attr("height",r.height).style("opacity",0).on("dblclick.zoom",null);f.axis_x_extent&&r.brush.extent(r.getDefaultExtent());r.axis.init();r.updateTargets(r.data.targets);h&&(r.updateDimension(),r.config.oninit.call(r),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1}));null==n.onresize&&(n.onresize=r.generateResize());n.onresize.add&&(n.onresize.add(function(){f.onresize.call(r)}),n.onresize.add(function(){r.api.flush()}),n.onresize.add(function(){f.onresized.call(r)}));r.api.element=r.selectChart.node()};t.smoothLines=function(n,t){var i=this;"grid"===t&&n.each(function(){var n=i.d3.select(this),t=n.attr("x1"),r=n.attr("x2"),u=n.attr("y1"),f=n.attr("y2");n.attr({x1:Math.ceil(t),x2:Math.ceil(r),y1:Math.ceil(u),y2:Math.ceil(f)})})};t.updateSizes=function(){var n=this,t=n.config,e=n.legend?n.getLegendHeight():0,o=n.legend?n.getLegendWidth():0,r=n.isLegendRight||n.isLegendInset?0:e,i=n.hasArcType(),u=t.axis_rotated||i?0:n.getHorizontalAxisHeight("x"),f=t.subchart_show&&!i?t.subchart_size_height+u:0;n.currentWidth=n.getCurrentWidth();n.currentHeight=n.getCurrentHeight();n.margin=t.axis_rotated?{top:n.getHorizontalAxisHeight("y2")+n.getCurrentPaddingTop(),right:i?0:n.getCurrentPaddingRight(),bottom:n.getHorizontalAxisHeight("y")+r+n.getCurrentPaddingBottom(),left:f+(i?0:n.getCurrentPaddingLeft())}:{top:4+n.getCurrentPaddingTop(),right:i?0:n.getCurrentPaddingRight(),bottom:u+f+r+n.getCurrentPaddingBottom(),left:i?0:n.getCurrentPaddingLeft()};n.margin2=t.axis_rotated?{top:n.margin.top,right:NaN,bottom:20+r,left:n.rotated_padding_left}:{top:n.currentHeight-f-r,right:NaN,bottom:u+r,left:n.margin.left};n.margin3={top:0,right:NaN,bottom:0,left:0};n.updateSizeForLegend&&n.updateSizeForLegend(e,o);n.width=n.currentWidth-n.margin.left-n.margin.right;n.height=n.currentHeight-n.margin.top-n.margin.bottom;n.width<0&&(n.width=0);n.height<0&&(n.height=0);n.width2=t.axis_rotated?n.margin.left-n.rotated_padding_left-n.rotated_padding_right:n.width;n.height2=t.axis_rotated?n.height:n.currentHeight-n.margin2.top-n.margin2.bottom;n.width2<0&&(n.width2=0);n.height2<0&&(n.height2=0);n.arcWidth=n.width-(n.isLegendRight?o+10:0);n.arcHeight=n.height-(n.isLegendRight?0:10);n.hasType("gauge")&&(n.arcHeight+=n.height-n.getGaugeLabelHeight());n.updateRadius&&n.updateRadius();n.isLegendRight&&i&&(n.margin3.left=n.arcWidth/2+1.1*n.radiusExpanded)};t.updateTargets=function(n){var t=this;t.updateTargetsForText(n);t.updateTargetsForBar(n);t.updateTargetsForLine(n);t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(n);t.updateTargetsForSubchart&&t.updateTargetsForSubchart(n);t.showTargets()};t.showTargets=function(){var n=this;n.svg.selectAll("."+i.target).filter(function(t){return n.isTargetToShow(t.id)}).transition().duration(n.config.transition_duration).style("opacity",1)};t.redraw=function(n,t){var ft,et,h,ot,st,ht,a,ct,lt,at,vt,yt,pt,v,y,p,w,b,o,s,wt,rt,k,c,l,bt,ut,d,g,r=this,kt=r.main,dt=r.d3,u=r.config,nt=r.getShapeIndices(r.isAreaType),tt=r.getShapeIndices(r.isBarType),it=r.getShapeIndices(r.isLineType),gt=r.hasArcType(),f=r.filterTargetsToShow(r.data.targets),ni=r.xv.bind(r);if(n=n||{},ft=e(n,"withY",!0),et=e(n,"withSubchart",!0),h=e(n,"withTransition",!0),ht=e(n,"withTransform",!1),a=e(n,"withUpdateXDomain",!1),ct=e(n,"withUpdateOrgXDomain",!1),lt=e(n,"withTrimXDomain",!0),pt=e(n,"withUpdateXAxis",a),at=e(n,"withLegend",!1),vt=e(n,"withEventRect",!0),yt=e(n,"withDimension",!0),ot=e(n,"withTransitionForExit",h),st=e(n,"withTransitionForAxis",h),o=h?u.transition_duration:0,s=ot?o:0,wt=st?o:0,t=t||r.axis.generateTransitions(wt),at&&u.legend_show?r.updateLegend(r.mapToIds(r.data.targets),n,t):yt&&r.updateDimension(!0),r.isCategorized()&&0===f.length&&r.x.domain([0,r.axes.x.selectAll(".tick").size()]),f.length?(r.updateXDomain(f,a,ct,lt),u.axis_x_tick_values||(c=r.axis.updateXAxisTickValues(f))):(r.xAxis.tickValues([]),r.subXAxis.tickValues([])),u.zoom_rescale&&!n.flow&&(ut=r.x.orgDomain()),r.y.domain(r.getYDomain(f,"y",ut)),r.y2.domain(r.getYDomain(f,"y2",ut)),!u.axis_y_tick_values&&u.axis_y_tick_count&&r.yAxis.tickValues(r.axis.generateTickValues(r.y.domain(),u.axis_y_tick_count)),!u.axis_y2_tick_values&&u.axis_y2_tick_count&&r.y2Axis.tickValues(r.axis.generateTickValues(r.y2.domain(),u.axis_y2_tick_count)),r.axis.redraw(t,gt),r.axis.updateLabels(h),(a||pt)&&f.length)if(u.axis_x_tick_culling&&c){for(l=1;l<c.length;l++)if(c.length/l<u.axis_x_tick_culling_max){bt=l;break}r.svg.selectAll("."+i.axisX+" .tick text").each(function(n){var t=c.indexOf(n);t>=0&&dt.select(this).style("display",t%bt?"none":"block")})}else r.svg.selectAll("."+i.axisX+" .tick text").style("display","block");v=r.generateDrawArea?r.generateDrawArea(nt,!1):void 0;y=r.generateDrawBar?r.generateDrawBar(tt):void 0;p=r.generateDrawLine?r.generateDrawLine(it,!1):void 0;w=r.generateXYForText(nt,tt,it,!0);b=r.generateXYForText(nt,tt,it,!1);ft&&(r.subY.domain(r.getYDomain(f,"y")),r.subY2.domain(r.getYDomain(f,"y2")));r.tooltip.style("display","none");r.updateXgridFocus();kt.select("text."+i.text+"."+i.empty).attr("x",r.width/2).attr("y",r.height/2).text(u.data_empty_label_text).transition().style("opacity",f.length?0:1);r.updateGrid(o);r.updateRegion(o);r.updateBar(s);r.updateLine(s);r.updateArea(s);r.updateCircle();r.hasDataLabel()&&r.updateText(s);r.redrawArc&&r.redrawArc(o,s,ht);r.redrawSubchart&&r.redrawSubchart(et,t,o,s,nt,tt,it);kt.selectAll("."+i.selectedCircles).filter(r.isBarType.bind(r)).selectAll("circle").remove();u.interaction_enabled&&!n.flow&&vt&&(r.redrawEventRect(),r.updateZoom&&r.updateZoom());r.updateCircleY();d=(r.config.axis_rotated?r.circleY:r.circleX).bind(r);g=(r.config.axis_rotated?r.circleX:r.circleY).bind(r);n.flow&&(k=r.generateFlow({targets:f,flow:n.flow,duration:n.flow.duration,drawBar:y,drawLine:p,drawArea:v,cx:d,cy:g,xv:ni,xForText:w,yForText:b}));(o||k)&&r.isTabVisible()?dt.transition().duration(o).each(function(){var t=[];[r.redrawBar(y,!0),r.redrawLine(p,!0),r.redrawArea(v,!0),r.redrawCircle(d,g,!0),r.redrawText(w,b,n.flow,!0),r.redrawRegion(!0),r.redrawGrid(!0)].forEach(function(n){n.forEach(function(n){t.push(n)})});rt=r.generateWait();t.forEach(function(n){rt.add(n)})}).call(rt,function(){k&&k();u.onrendered&&u.onrendered.call(r)}):(r.redrawBar(y),r.redrawLine(p),r.redrawArea(v),r.redrawCircle(d,g),r.redrawText(w,b,n.flow),r.redrawRegion(),r.redrawGrid(),u.onrendered&&u.onrendered.call(r));r.mapToIds(r.data.targets).forEach(function(n){r.withoutFadeIn[n]=!0})};t.updateAndRedraw=function(n){var i,t=this,r=t.config;n=n||{};n.withTransition=e(n,"withTransition",!0);n.withTransform=e(n,"withTransform",!1);n.withLegend=e(n,"withLegend",!1);n.withUpdateXDomain=!0;n.withUpdateOrgXDomain=!0;n.withTransitionForExit=!1;n.withTransitionForTransform=e(n,"withTransitionForTransform",n.withTransition);t.updateSizes();n.withLegend&&r.legend_show||(i=t.axis.generateTransitions(n.withTransitionForAxis?r.transition_duration:0),t.updateScales(),t.updateSvgSize(),t.transformAll(n.withTransitionForTransform,i));t.redraw(n,i)};t.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})};t.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type};t.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0};t.isCustomX=function(){var n=this,t=n.config;return!n.isTimeSeries()&&(t.data_x||h(t.data_xs))};t.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};t.getTranslate=function(n){var i,r,t=this,u=t.config;return"main"===n?(i=y(t.margin.left),r=y(t.margin.top)):"context"===n?(i=y(t.margin2.left),r=y(t.margin2.top)):"legend"===n?(i=t.margin3.left,r=t.margin3.top):"x"===n?(i=0,r=u.axis_rotated?0:t.height):"y"===n?(i=0,r=u.axis_rotated?t.height:0):"y2"===n?(i=u.axis_rotated?0:t.width,r=u.axis_rotated?1:0):"subx"===n?(i=0,r=u.axis_rotated?0:t.height2):"arc"===n&&(i=t.arcWidth/2,r=t.arcHeight/2),"translate("+i+","+r+")"};t.initialOpacity=function(n){return null!==n.value&&this.withoutFadeIn[n.id]?1:0};t.initialOpacityForCircle=function(n){return null!==n.value&&this.withoutFadeIn[n.id]?this.opacityForCircle(n):0};t.opacityForCircle=function(n){var t=this.config.point_show?1:0;return f(n.value)?this.isScatterType(n)?.5:t:0};t.opacityForText=function(){return this.hasDataLabel()?1:0};t.xx=function(n){return n?this.x(n.x):null};t.xv=function(n){var t=this,i=n.value;return t.isTimeSeries()?i=t.parseDate(n.value):t.isCategorized()&&"string"==typeof n.value&&(i=t.config.axis_x_categories.indexOf(n.value)),Math.ceil(t.x(i))};t.yv=function(n){var t=this,i=n.axis&&"y2"===n.axis?t.y2:t.y;return Math.ceil(i(n.value))};t.subxx=function(n){return n?this.subX(n.x):null};t.transformMain=function(n,t){var u,f,e,r=this;t&&t.axisX?u=t.axisX:(u=r.main.select("."+i.axisX),n&&(u=u.transition()));t&&t.axisY?f=t.axisY:(f=r.main.select("."+i.axisY),n&&(f=f.transition()));t&&t.axisY2?e=t.axisY2:(e=r.main.select("."+i.axisY2),n&&(e=e.transition()));(n?r.main.transition():r.main).attr("transform",r.getTranslate("main"));u.attr("transform",r.getTranslate("x"));f.attr("transform",r.getTranslate("y"));e.attr("transform",r.getTranslate("y2"));r.main.select("."+i.chartArcs).attr("transform",r.getTranslate("arc"))};t.transformAll=function(n,t){var i=this;i.transformMain(n,t);i.config.subchart_show&&i.transformContext(n,t);i.legend&&i.transformLegend(n)};t.updateSvgSize=function(){var n=this,t=n.svg.select(".c3-brush .background");n.svg.attr("width",n.currentWidth).attr("height",n.currentHeight);n.svg.selectAll(["#"+n.clipId,"#"+n.clipIdForGrid]).select("rect").attr("width",n.width).attr("height",n.height);n.svg.select("#"+n.clipIdForXAxis).select("rect").attr("x",n.getXAxisClipX.bind(n)).attr("y",n.getXAxisClipY.bind(n)).attr("width",n.getXAxisClipWidth.bind(n)).attr("height",n.getXAxisClipHeight.bind(n));n.svg.select("#"+n.clipIdForYAxis).select("rect").attr("x",n.getYAxisClipX.bind(n)).attr("y",n.getYAxisClipY.bind(n)).attr("width",n.getYAxisClipWidth.bind(n)).attr("height",n.getYAxisClipHeight.bind(n));n.svg.select("#"+n.clipIdForSubchart).select("rect").attr("width",n.width).attr("height",t.size()?t.attr("height"):0);n.svg.select("."+i.zoomRect).attr("width",n.width).attr("height",n.height);n.selectChart.style("max-height",n.currentHeight+"px")};t.updateDimension=function(n){var t=this;n||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis)));t.updateSizes();t.updateScales();t.updateSvgSize();t.transformAll(!1)};t.observeInserted=function(t){var r,i=this;return"undefined"==typeof MutationObserver?void n.console.error("MutationObserver not defined."):(r=new MutationObserver(function(u){u.forEach(function(u){"childList"===u.type&&u.previousSibling&&(r.disconnect(),i.intervalForObserveInserted=n.setInterval(function(){t.node().parentNode&&(n.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})}),void r.observe(t.node(),{attributes:!0,childList:!0,characterData:!0}))};t.generateResize=function(){function n(){t.forEach(function(n){n()})}var t=[];return n.add=function(n){t.push(n)},n};t.endall=function(n,t){var i=0;n.each(function(){++i}).each("end",function(){--i||t.apply(this,arguments)})};t.generateWait=function(){var n=[],t=function(t,i){var r=setInterval(function(){var t=0;n.forEach(function(n){if(n.empty())return void(t+=1);try{n.transition()}catch(i){t+=1}});t===n.length&&(clearInterval(r),i&&i())},10)};return t.add=function(t){n.push(t)},t};t.parseDate=function(t){var i,r=this;return t instanceof Date?i=t:"string"==typeof t?i=r.dataTimeFormat(r.config.data_xFormat).parse(t):"number"!=typeof t&&isNaN(t)||(i=new Date(+t)),(!i||isNaN(+i))&&n.console.error("Failed to parse x '"+t+"' to Date object"),i};t.isTabVisible=function(){var n;return"undefined"!=typeof document.hidden?n="hidden":"undefined"!=typeof document.mozHidden?n="mozHidden":"undefined"!=typeof document.msHidden?n="msHidden":"undefined"!=typeof document.webkitHidden&&(n="webkitHidden"),document[n]?!1:!0};t.getDefaultConfig=function(){var n={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(n){return n},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(n,t,i,r){return this.getTooltipContent?this.getTooltipContent(n,t,i,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(t){n[t]=this.additionalConfig[t]},this),n};t.additionalConfig={};t.loadConfig=function(n){function r(){var n=u.shift();return n&&t&&"object"==typeof t&&n in t?(t=t[n],r()):n?void 0:t}var t,u,i,f=this.config;Object.keys(f).forEach(function(e){t=n;u=e.split("_");i=r();s(i)&&(f[e]=i)})};t.getScale=function(n,t,i){return(i?this.d3.time.scale():this.d3.scale.linear()).range([n,t])};t.getX=function(n,t,i,r){var o,e=this,u=e.getScale(n,t,e.isTimeSeries()),f=i?u.domain(i):u;e.isCategorized()?(r=r||function(){return 0},u=function(n,t){var i=f(n)+r(n);return t?i:Math.ceil(i)}):u=function(n,t){var i=f(n);return t?i:Math.ceil(i)};for(o in f)u[o]=f[o];return u.orgDomain=function(){return f.domain()},e.isCategorized()&&(u.domain=function(n){return arguments.length?(f.domain(n),u):(n=this.orgDomain(),[n[0],n[1]+1])}),u};t.getY=function(n,t,i){var r=this.getScale(n,t,this.isTimeSeriesY());return i&&r.domain(i),r};t.getYScale=function(n){return"y2"===this.axis.getId(n)?this.y2:this.y};t.getSubYScale=function(n){return"y2"===this.axis.getId(n)?this.subY2:this.subY};t.updateScales=function(){var n=this,t=n.config,i=!n.x;n.xMin=t.axis_rotated?1:0;n.xMax=t.axis_rotated?n.height:n.width;n.yMin=t.axis_rotated?0:n.height;n.yMax=t.axis_rotated?n.width:1;n.subXMin=n.xMin;n.subXMax=n.xMax;n.subYMin=t.axis_rotated?0:n.height2;n.subYMax=t.axis_rotated?n.width2:1;n.x=n.getX(n.xMin,n.xMax,i?void 0:n.x.orgDomain(),function(){return n.xAxis.tickOffset()});n.y=n.getY(n.yMin,n.yMax,i?t.axis_y_default:n.y.domain());n.y2=n.getY(n.yMin,n.yMax,i?t.axis_y2_default:n.y2.domain());n.subX=n.getX(n.xMin,n.xMax,n.orgXDomain,function(t){return t%1?0:n.subXAxis.tickOffset()});n.subY=n.getY(n.subYMin,n.subYMax,i?t.axis_y_default:n.subY.domain());n.subY2=n.getY(n.subYMin,n.subYMax,i?t.axis_y2_default:n.subY2.domain());n.xAxisTickFormat=n.axis.getXAxisTickFormat();n.xAxisTickValues=n.axis.getXAxisTickValues();n.yAxisTickValues=n.axis.getYAxisTickValues();n.y2AxisTickValues=n.axis.getY2AxisTickValues();n.xAxis=n.axis.getXAxis(n.x,n.xOrient,n.xAxisTickFormat,n.xAxisTickValues,t.axis_x_tick_outer);n.subXAxis=n.axis.getXAxis(n.subX,n.subXOrient,n.xAxisTickFormat,n.xAxisTickValues,t.axis_x_tick_outer);n.yAxis=n.axis.getYAxis(n.y,n.yOrient,t.axis_y_tick_format,n.yAxisTickValues,t.axis_y_tick_outer);n.y2Axis=n.axis.getYAxis(n.y2,n.y2Orient,t.axis_y2_tick_format,n.y2AxisTickValues,t.axis_y2_tick_outer);i||(n.brush&&n.brush.scale(n.subX),t.zoom_enabled&&n.zoom.scale(n.x));n.updateArc&&n.updateArc()};t.getYDomainMin=function(n){var f,e,r,u,o,s,i=this,h=i.config,c=i.mapToIds(n),t=i.getValuesAsIdKeyed(n);if(h.data_groups.length>0)for(s=i.hasNegativeValueInTargets(n),f=0;f<h.data_groups.length;f++)if(u=h.data_groups[f].filter(function(n){return c.indexOf(n)>=0}),0!==u.length)for(r=u[0],s&&t[r]&&t[r].forEach(function(n,i){t[r][i]=0>n?n:0}),e=1;e<u.length;e++)o=u[e],t[o]&&t[o].forEach(function(n,u){i.axis.getId(o)!==i.axis.getId(r)||!t[r]||s&&+n>0||(t[r][u]+=+n)});return i.d3.min(Object.keys(t).map(function(n){return i.d3.min(t[n])}))};t.getYDomainMax=function(n){var f,e,r,u,o,s,i=this,h=i.config,c=i.mapToIds(n),t=i.getValuesAsIdKeyed(n);if(h.data_groups.length>0)for(s=i.hasPositiveValueInTargets(n),f=0;f<h.data_groups.length;f++)if(u=h.data_groups[f].filter(function(n){return c.indexOf(n)>=0}),0!==u.length)for(r=u[0],s&&t[r]&&t[r].forEach(function(n,i){t[r][i]=n>0?n:0}),e=1;e<u.length;e++)o=u[e],t[o]&&t[o].forEach(function(n,u){i.axis.getId(o)!==i.axis.getId(r)||!t[r]||s&&0>+n||(t[r][u]+=+n)});return i.d3.max(Object.keys(t).map(function(n){return i.d3.max(t[n])}))};t.getYDomain=function(n,t,i){var g,s,ft,c,l,nt,y,tt,a,k,d,r=this,e=r.config,ut=n.filter(function(n){return r.axis.getId(n.id)===t}),b=i?r.filterByXDomain(ut,i):ut,p="y2"===t?e.axis_y2_min:e.axis_y_min,w="y2"===t?e.axis_y2_max:e.axis_y_max,u=r.getYDomainMin(b),o=r.getYDomainMax(b),it="y2"===t?e.axis_y2_center:e.axis_y_center,rt=r.hasType("bar",b)&&e.bar_zerobased||r.hasType("area",b)&&e.area_zerobased,et="y2"===t?e.axis_y2_inverted:e.axis_y_inverted,ot=r.hasDataLabel()&&e.axis_rotated,st=r.hasDataLabel()&&!e.axis_rotated;return u=f(p)?p:f(w)?w>u?u:w-10:u,o=f(w)?w:f(p)?o>p?o:p+10:o,0===b.length?"y2"===t?r.y2.domain():r.y.domain():(isNaN(u)&&(u=0),isNaN(o)&&(o=u),u===o&&(0>u?o=0:u=0),k=u>=0&&o>=0,d=0>=u&&0>=o,(f(p)&&k||f(w)&&d)&&(rt=!1),rt&&(k&&(u=0),d&&(o=0)),s=Math.abs(o-u),ft=c=l=.1*s,"undefined"!=typeof it&&(nt=Math.max(Math.abs(u),Math.abs(o)),o=it+nt,u=it-nt),ot?(y=r.getDataLabelLength(u,o,"width"),tt=v(r.y.range()),a=[y[0]/tt,y[1]/tt],c+=s*(a[1]/(1-a[0]-a[1])),l+=s*(a[0]/(1-a[0]-a[1]))):st&&(y=r.getDataLabelLength(u,o,"height"),c+=r.axis.convertPixelsToAxisPadding(y[1],s),l+=r.axis.convertPixelsToAxisPadding(y[0],s)),"y"===t&&h(e.axis_y_padding)&&(c=r.axis.getPadding(e.axis_y_padding,"top",c,s),l=r.axis.getPadding(e.axis_y_padding,"bottom",l,s)),"y2"===t&&h(e.axis_y2_padding)&&(c=r.axis.getPadding(e.axis_y2_padding,"top",c,s),l=r.axis.getPadding(e.axis_y2_padding,"bottom",l,s)),rt&&(k&&(l=u),d&&(c=-o)),g=[u-l,o+c],et?g.reverse():g)};t.getXDomainMin=function(n){var t=this,i=t.config;return s(i.axis_x_min)?t.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:t.d3.min(n,function(n){return t.d3.min(n.values,function(n){return n.x})})};t.getXDomainMax=function(n){var t=this,i=t.config;return s(i.axis_x_max)?t.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:t.d3.max(n,function(n){return t.d3.max(n.values,function(n){return n.x})})};t.getXDomainPadding=function(n){var u,i,e,o,r=this,t=r.config,s=n[1]-n[0];return r.isCategorized()?i=0:r.hasType("bar")?(u=r.getMaxDataCount(),i=u>1?s/(u-1)/2:.5):i=.01*s,"object"==typeof t.axis_x_padding&&h(t.axis_x_padding)?(e=f(t.axis_x_padding.left)?t.axis_x_padding.left:i,o=f(t.axis_x_padding.right)?t.axis_x_padding.right:i):e=o="number"==typeof t.axis_x_padding?t.axis_x_padding:i,{left:e,right:o}};t.getXDomain=function(n){var r=this,f=[r.getXDomainMin(n),r.getXDomainMax(n)],t=f[0],i=f[1],u=r.getXDomainPadding(f),e=0,o=0;return t-i!=0||r.isCategorized()||(r.isTimeSeries()?(t=new Date(.5*t.getTime()),i=new Date(1.5*i.getTime())):(t=0===t?1:.5*t,i=0===i?-1:1.5*i)),(t||0===t)&&(e=r.isTimeSeries()?new Date(t.getTime()-u.left):t-u.left),(i||0===i)&&(o=r.isTimeSeries()?new Date(i.getTime()+u.right):i+u.right),[e,o]};t.updateXDomain=function(n,t,i,r,u){var f=this,e=f.config;return i&&(f.x.domain(u?u:f.d3.extent(f.getXDomain(n))),f.orgXDomain=f.x.domain(),e.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),t&&(f.x.domain(u?u:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),e.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),r&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()};t.trimXDomain=function(n){var t=this;return n[0]<=t.orgXDomain[0]&&(n[1]=+n[1]+(t.orgXDomain[0]-n[0]),n[0]=t.orgXDomain[0]),t.orgXDomain[1]<=n[1]&&(n[0]=+n[0]-(n[1]-t.orgXDomain[1]),n[1]=t.orgXDomain[1]),n};t.isX=function(n){var i=this,t=i.config;return t.data_x&&n===t.data_x||h(t.data_xs)&&rt(t.data_xs,n)};t.isNotX=function(n){return!this.isX(n)};t.getXKey=function(n){var i=this,t=i.config;return t.data_x?t.data_x:h(t.data_xs)?t.data_xs[n]:null};t.getXValuesOfXKey=function(n,t){var r,i=this,u=t&&h(t)?i.mapToIds(t):[];return u.forEach(function(t){i.getXKey(t)===n&&(r=i.data.xs[t])}),r};t.getIndexByX=function(n){var t=this,i=t.filterByX(t.data.targets,n);return i.length?i[0].index:null};t.getXValue=function(n,t){var i=this;return n in i.data.xs&&i.data.xs[n]&&f(i.data.xs[n][t])?i.data.xs[n][t]:t};t.getOtherTargetXs=function(){var n=this,t=Object.keys(n.data.xs);return t.length?n.data.xs[t[0]]:null};t.getOtherTargetX=function(n){var t=this.getOtherTargetXs();return t&&n<t.length?t[n]:null};t.addXs=function(n){var t=this;Object.keys(n).forEach(function(i){t.config.data_xs[i]=n[i]})};t.hasMultipleX=function(n){return this.d3.set(Object.keys(n).map(function(t){return n[t]})).size()>1};t.isMultipleX=function(){return h(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};t.addName=function(n){var t,i=this;return n&&(t=i.config.data_names[n.id],n.name=t?t:n.id),n};t.getValueOnIndex=function(n,t){var i=n.filter(function(n){return n.index===t});return i.length?i[0]:null};t.updateTargetX=function(n,t){var i=this;n.forEach(function(n){n.values.forEach(function(r,u){r.x=i.generateTargetX(t[u],n.id,u)});i.data.xs[n.id]=t})};t.updateTargetXs=function(n,t){var i=this;n.forEach(function(n){t[n.id]&&i.updateTargetX([n],t[n.id])})};t.generateTargetX=function(n,t,i){var r=this;return r.isTimeSeries()?r.parseDate(n?n:r.getXValue(t,i)):r.isCustomX()&&!r.isCategorized()?f(n)?+n:r.getXValue(t,i):i};t.cloneTarget=function(n){return{id:n.id,id_org:n.id_org,values:n.values.map(function(n){return{x:n.x,value:n.value,id:n.id}})}};t.updateXs=function(){var n=this;n.data.targets.length&&(n.xs=[],n.data.targets[0].values.forEach(function(t){n.xs[t.index]=t.x}))};t.getPrevX=function(n){var t=this.xs[n-1];return"undefined"!=typeof t?t:null};t.getNextX=function(n){var t=this.xs[n+1];return"undefined"!=typeof t?t:null};t.getMaxDataCount=function(){var n=this;return n.d3.max(n.data.targets,function(n){return n.values.length})};t.getMaxDataCountTarget=function(n){var t,i=n.length,r=0;return i>1?n.forEach(function(n){n.values.length>r&&(t=n,r=n.values.length)}):t=i?n[0]:null,t};t.getEdgeX=function(n){var t=this;return n.length?[t.d3.min(n,function(n){return n.values[0].x}),t.d3.max(n,function(n){return n.values[n.values.length-1].x})]:[0,0]};t.mapToIds=function(n){return n.map(function(n){return n.id})};t.mapToTargetIds=function(n){var t=this;return n?o(n)?[n]:n:t.mapToIds(t.data.targets)};t.hasTarget=function(n,t){for(var r=this.mapToIds(n),i=0;i<r.length;i++)if(r[i]===t)return!0;return!1};t.isTargetToShow=function(n){return this.hiddenTargetIds.indexOf(n)<0};t.isLegendToShow=function(n){return this.hiddenLegendIds.indexOf(n)<0};t.filterTargetsToShow=function(n){var t=this;return n.filter(function(n){return t.isTargetToShow(n.id)})};t.mapTargetsToUniqueXs=function(n){var t=this,i=t.d3.set(t.d3.merge(n.map(function(n){return n.values.map(function(n){return+n.x})}))).values();return i.map(t.isTimeSeries()?function(n){return new Date(+n)}:function(n){return+n})};t.addHiddenTargetIds=function(n){this.hiddenTargetIds=this.hiddenTargetIds.concat(n)};t.removeHiddenTargetIds=function(n){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return n.indexOf(t)<0})};t.addHiddenLegendIds=function(n){this.hiddenLegendIds=this.hiddenLegendIds.concat(n)};t.removeHiddenLegendIds=function(n){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return n.indexOf(t)<0})};t.getValuesAsIdKeyed=function(n){var t={};return n.forEach(function(n){t[n.id]=[];n.values.forEach(function(i){t[n.id].push(i.value)})}),t};t.checkValueInTargets=function(n,t){for(var r,u,f=Object.keys(n),i=0;i<f.length;i++)for(u=n[f[i]].values,r=0;r<u.length;r++)if(t(u[r].value))return!0;return!1};t.hasNegativeValueInTargets=function(n){return this.checkValueInTargets(n,function(n){return 0>n})};t.hasPositiveValueInTargets=function(n){return this.checkValueInTargets(n,function(n){return n>0})};t.isOrderDesc=function(){var n=this.config;return"string"==typeof n.data_order&&"desc"===n.data_order.toLowerCase()};t.isOrderAsc=function(){var n=this.config;return"string"==typeof n.data_order&&"asc"===n.data_order.toLowerCase()};t.orderTargets=function(n){var t=this,i=t.config,r=t.isOrderAsc(),u=t.isOrderDesc();return r||u?n.sort(function(n,t){var i=function(n,t){return n+Math.abs(t.value)},u=n.values.reduce(i,0),f=t.values.reduce(i,0);return r?f-u:u-f}):a(i.data_order)&&n.sort(i.data_order),n};t.filterByX=function(n,t){return this.d3.merge(n.map(function(n){return n.values})).filter(function(n){return n.x-t==0})};t.filterRemoveNull=function(n){return n.filter(function(n){return f(n.value)})};t.filterByXDomain=function(n,t){return n.map(function(n){return{id:n.id,id_org:n.id_org,values:n.values.filter(function(n){return t[0]<=n.x&&n.x<=t[1]})}})};t.hasDataLabel=function(){var n=this.config;return"boolean"==typeof n.data_labels&&n.data_labels?!0:"object"==typeof n.data_labels&&h(n.data_labels)?!0:!1};t.getDataLabelLength=function(n,t,i){var r=this,u=[0,0],f=1.3;return r.selectChart.select("svg").selectAll(".dummy").data([n,t]).enter().append("text").text(function(n){return r.dataLabelFormat(n.id)(n)}).each(function(n,t){u[t]=this.getBoundingClientRect()[i]*f}).remove(),u};t.isNoneArc=function(n){return this.hasTarget(this.data.targets,n.id)};t.isArc=function(n){return"data"in n&&this.hasTarget(this.data.targets,n.data.id)};t.findSameXOfValues=function(n,t){for(var u=n[t].x,r=[],i=t-1;i>=0&&u===n[i].x;i--)r.push(n[i]);for(i=t;i<n.length&&u===n[i].x;i++)r.push(n[i]);return r};t.findClosestFromTargets=function(n,t){var i,r=this;return i=n.map(function(n){return r.findClosest(n.values,t)}),r.findClosest(i,t)};t.findClosest=function(n,t){var u,r=this,f=100;return n.filter(function(n){return n&&r.isBarType(n.id)}).forEach(function(n){var t=r.main.select("."+i.bars+r.getTargetSelectorSuffix(n.id)+" ."+i.bar+"-"+n.index).node();!u&&r.isWithinBar(t)&&(u=n)}),n.filter(function(n){return n&&!r.isBarType(n.id)}).forEach(function(n){var i=r.dist(n,t);f>i&&(f=i,u=n)}),u};t.dist=function(n,t){var i=this,r=i.config,u=r.axis_rotated?1:0,f=r.axis_rotated?0:1,e=i.circleY(n,n.index),o=i.x(n.x);return Math.pow(o-t[u],2)+Math.pow(e-t[f],2)};t.convertValuesToStep=function(n){var i,t=[].concat(n);if(!this.isCategorized())return n;for(i=n.length+1;i>0;i--)t[i]=t[i-1];return t[0]={x:t[0].x-1,value:t[0].value,id:t[0].id},t[n.length+1]={x:t[n.length].x+1,value:t[n.length].value,id:t[n.length].id},t};t.updateDataAttributes=function(n,t){var r=this,u=r.config,i=u["data_"+n];return"undefined"==typeof t?i:(Object.keys(t).forEach(function(n){i[n]=t[n]}),r.redraw({withLegend:!0}),i)};t.convertUrlToData=function(n,t,i,r){var u=this,f=t?t:"csv";u.d3.xhr(n,function(n,t){var e;if(!t)throw new Error(n.responseURL+" "+n.status+" ("+n.statusText+")");e="json"===f?u.convertJsonToData(JSON.parse(t.response),i):"tsv"===f?u.convertTsvToData(t.response):u.convertCsvToData(t.response);r.call(u,e)})};t.convertXsvToData=function(n,t){var i,r=t.parseRows(n);return 1===r.length?(i=[{}],r[0].forEach(function(n){i[0][n]=null})):i=t.parse(n),i};t.convertCsvToData=function(n){return this.convertXsvToData(n,this.d3.csv)};t.convertTsvToData=function(n){return this.convertXsvToData(n,this.d3.tsv)};t.convertJsonToData=function(n,t){var r,u,f=this,i=[];return t?(t.x?(r=t.value.concat(t.x),f.config.data_x=t.x):r=t.value,i.push(r),n.forEach(function(n){var t=[];r.forEach(function(i){var r=c(n[i])?null:n[i];t.push(r)});i.push(t)}),u=f.convertRowsToData(i)):(Object.keys(n).forEach(function(t){i.push([t].concat(n[t]))}),u=f.convertColumnsToData(i)),u};t.convertRowsToData=function(n){for(var i,f=n[0],r={},u=[],t=1;t<n.length;t++){for(r={},i=0;i<n[t].length;i++){if(c(n[t][i]))throw new Error("Source data is missing a component at ("+t+","+i+")!");r[f[i]]=n[t][i]}u.push(r)}return u};t.convertColumnsToData=function(n){for(var t,u,r=[],i=0;i<n.length;i++)for(u=n[i][0],t=1;t<n[i].length;t++){if(c(r[t-1])&&(r[t-1]={}),c(n[i][t]))throw new Error("Source data is missing a component at ("+i+","+t+")!");r[t-1][u]=n[i][t]}return r};t.convertDataToTargets=function(n,t){var u,i=this,r=i.config,e=i.d3.keys(n[0]).filter(i.isNotX,i),o=i.d3.keys(n[0]).filter(i.isX,i);return e.forEach(function(u){var e=i.getXKey(u);i.isCustomX()||i.isTimeSeries()?o.indexOf(e)>=0?i.data.xs[u]=(t&&i.data.xs[u]?i.data.xs[u]:[]).concat(n.map(function(n){return n[e]}).filter(f).map(function(n,t){return i.generateTargetX(n,u,t)})):r.data_x?i.data.xs[u]=i.getOtherTargetXs():h(r.data_xs)&&(i.data.xs[u]=i.getXValuesOfXKey(e,i.data.targets)):i.data.xs[u]=n.map(function(n,t){return t})}),e.forEach(function(n){if(!i.data.xs[n])throw new Error('x is not defined for id = "'+n+'".');}),u=e.map(function(t,u){var f=r.data_idConverter(t);return{id:f,id_org:t,values:n.map(function(n,e){var h=i.getXKey(t),o=n[h],s=i.generateTargetX(o,t,e);return i.isCustomX()&&i.isCategorized()&&0===u&&o&&(0===e&&(r.axis_x_categories=[]),r.axis_x_categories.push(o)),(c(n[t])||i.data.xs[t].length<=e)&&(s=void 0),{x:s,value:null===n[t]||isNaN(n[t])?null:+n[t],id:f}}).filter(function(n){return s(n.x)})}}),u.forEach(function(n){var t;r.data_xSort&&(n.values=n.values.sort(function(n,t){var i=n.x||0===n.x?n.x:1/0,r=t.x||0===t.x?t.x:1/0;return i-r}));t=0;n.values.forEach(function(n){n.index=t++});i.data.xs[n.id].sort(function(n,t){return n-t})}),r.data_type&&i.setTargetType(i.mapToIds(u).filter(function(n){return!(n in r.data_types)}),r.data_type),u.forEach(function(n){i.addCache(n.id_org,n)}),u};t.load=function(n,t){var i=this;n&&(t.filter&&(n=n.filter(t.filter)),(t.type||t.types)&&n.forEach(function(n){var r=t.types&&t.types[n.id]?t.types[n.id]:t.type;i.setTargetType(n.id,r)}),i.data.targets.forEach(function(t){for(var i=0;i<n.length;i++)if(t.id===n[i].id){t.values=n[i].values;n.splice(i,1);break}}),i.data.targets=i.data.targets.concat(n));i.updateTargets(i.data.targets);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});t.done&&t.done()};t.loadFromArgs=function(n){var t=this;n.data?t.load(t.convertDataToTargets(n.data),n):n.url?t.convertUrlToData(n.url,n.mimeType,n.keys,function(i){t.load(t.convertDataToTargets(i),n)}):n.json?t.load(t.convertDataToTargets(t.convertJsonToData(n.json,n.keys)),n):n.rows?t.load(t.convertDataToTargets(t.convertRowsToData(n.rows)),n):n.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(n.columns)),n):t.load(null,n)};t.unload=function(n,t){var r=this;return t||(t=function(){}),n=n.filter(function(n){return r.hasTarget(r.data.targets,n)}),n&&0!==n.length?(r.svg.selectAll(n.map(function(n){return r.selectorTarget(n)})).transition().style("opacity",0).remove().call(r.endall,t),void n.forEach(function(n){r.withoutFadeIn[n]=!1;r.legend&&r.legend.selectAll("."+i.legendItem+r.getTargetSelectorSuffix(n)).remove();r.data.targets=r.data.targets.filter(function(t){return t.id!==n})})):void t()};t.categoryName=function(n){var t=this.config;return n<t.axis_x_categories.length?t.axis_x_categories[n]:n};t.initEventRect=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.eventRects).style("fill-opacity",0)};t.redrawEventRect=function(){var t,u,n=this,e=n.config,f=n.isMultipleX(),r=n.main.select("."+i.eventRects).style("cursor",e.zoom_enabled?e.axis_rotated?"ns-resize":"ew-resize":null).classed(i.eventRectsMultiple,f).classed(i.eventRectsSingle,!f);r.selectAll("."+i.eventRect).remove();n.eventRect=r.selectAll("."+i.eventRect);f?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(u=n.getMaxDataCountTarget(n.data.targets),r.datum(u?u.values:[]),n.eventRect=r.selectAll("."+i.eventRect),t=n.eventRect.data(function(n){return n}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())};t.updateEventRect=function(n){var f,e,o,s,i,u,t=this,r=t.config;n=n||t.eventRect.data(function(n){return n});t.isMultipleX()?(f=0,e=0,o=t.width,s=t.height):(!t.isCustomX()&&!t.isTimeSeries()||t.isCategorized()?(i=t.getEventRectWidth(),u=function(n){return t.x(n.x)-i/2}):(t.updateXs(),i=function(n){var i=t.getPrevX(n.index),u=t.getNextX(n.index);return null===i&&null===u?r.axis_rotated?t.height:t.width:(null===i&&(i=t.x.domain()[0]),null===u&&(u=t.x.domain()[1]),Math.max(0,(t.x(u)-t.x(i))/2))},u=function(n){var i=t.getPrevX(n.index),r=t.getNextX(n.index),u=t.data.xs[n.id][n.index];return null===i&&null===r?0:(null===i&&(i=t.x.domain()[0]),(t.x(u)+t.x(i))/2)}),f=r.axis_rotated?0:u,e=r.axis_rotated?u:0,o=r.axis_rotated?t.width:i,s=r.axis_rotated?i:t.height);n.attr("class",t.classEvent.bind(t)).attr("x",f).attr("y",e).attr("width",o).attr("height",s)};t.generateEventRectsForSingleX=function(n){var t=this,u=t.d3,r=t.config;n.append("rect").attr("class",t.classEvent.bind(t)).style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("mouseover",function(n){var u=n.index;t.dragging||t.flowing||t.hasArcType()||(r.point_focus_expand_enabled&&t.expandCircles(u,null,!0),t.expandBars(u,null,!0),t.main.selectAll("."+i.shape+"-"+u).each(function(n){r.data_onmouseover.call(t.api,n)}))}).on("mouseout",function(n){var u=n.index;t.config&&(t.hasArcType()||(t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars(),t.main.selectAll("."+i.shape+"-"+u).each(function(n){r.data_onmouseout.call(t.api,n)})))}).on("mousemove",function(n){var e,f=n.index,o=t.svg.select("."+i.eventRect+"-"+f);t.dragging||t.flowing||t.hasArcType()||(t.isStepType(n)&&"step-after"===t.config.line_step_type&&u.mouse(this)[0]<t.x(t.getXValue(n.id,f))&&(f-=1),e=t.filterTargetsToShow(t.data.targets).map(function(n){return t.addName(t.getValueOnIndex(n.values,f))}),r.tooltip_grouped&&(t.showTooltip(e,this),t.showXGridFocus(e)),(!r.tooltip_grouped||r.data_selection_enabled&&!r.data_selection_grouped)&&t.main.selectAll("."+i.shape+"-"+f).each(function(){u.select(this).classed(i.EXPANDED,!0);r.data_selection_enabled&&o.style("cursor",r.data_selection_grouped?"pointer":null);r.tooltip_grouped||(t.hideXGridFocus(),t.hideTooltip(),r.data_selection_grouped||(t.unexpandCircles(f),t.unexpandBars(f)))}).filter(function(n){return t.isWithinShape(this,n)}).each(function(n){r.data_selection_enabled&&(r.data_selection_grouped||r.data_selection_isselectable(n))&&o.style("cursor","pointer");r.tooltip_grouped||(t.showTooltip([n],this),t.showXGridFocus([n]),r.point_focus_expand_enabled&&t.expandCircles(f,n.id,!0),t.expandBars(f,n.id,!0))}))}).on("click",function(n){var f=n.index;if(!t.hasArcType()&&t.toggleShape){if(t.cancelClick)return void(t.cancelClick=!1);t.isStepType(n)&&"step-after"===r.line_step_type&&u.mouse(this)[0]<t.x(t.getXValue(n.id,f))&&(f-=1);t.main.selectAll("."+i.shape+"-"+f).each(function(n){(r.data_selection_grouped||t.isWithinShape(this,n))&&(t.toggleShape(this,n,f),t.config.data_onclick.call(t.api,n,this))})}}).call(r.data_selection_draggable&&t.drag?u.behavior.drag().origin(Object).on("drag",function(){t.drag(u.mouse(this))}).on("dragstart",function(){t.dragstart(u.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})};t.generateEventRectsForMultipleXs=function(n){function f(){t.svg.select("."+i.eventRect).style("cursor",null);t.hideXGridFocus();t.hideTooltip();t.unexpandCircles();t.unexpandBars()}var t=this,u=t.d3,r=t.config;n.append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).attr("class",i.eventRect).on("mouseout",function(){t.config&&(t.hasArcType()||f())}).on("mousemove",function(){var e,n,h,o,s=t.filterTargetsToShow(t.data.targets);if(!t.dragging&&!t.hasArcType(s)){if(e=u.mouse(this),n=t.findClosestFromTargets(s,e),!t.mouseover||n&&n.id===t.mouseover.id||(r.data_onmouseout.call(t.api,t.mouseover),t.mouseover=void 0),!n)return void f();h=t.isScatterType(n)||!r.tooltip_grouped?[n]:t.filterByX(s,n.x);o=h.map(function(n){return t.addName(n)});t.showTooltip(o,this);r.point_focus_expand_enabled&&t.expandCircles(n.index,n.id,!0);t.expandBars(n.index,n.id,!0);t.showXGridFocus(o);(t.isBarType(n.id)||t.dist(n,e)<100)&&(t.svg.select("."+i.eventRect).style("cursor","pointer"),t.mouseover||(r.data_onmouseover.call(t.api,n),t.mouseover=n))}}).on("click",function(){var f,n,e=t.filterTargetsToShow(t.data.targets);t.hasArcType(e)||(f=u.mouse(this),n=t.findClosestFromTargets(e,f),n&&(t.isBarType(n.id)||t.dist(n,f)<100)&&t.main.selectAll("."+i.shapes+t.getTargetSelectorSuffix(n.id)).selectAll("."+i.shape+"-"+n.index).each(function(){(r.data_selection_grouped||t.isWithinShape(this,n))&&(t.toggleShape(this,n,n.index),t.config.data_onclick.call(t.api,n,this))}))}).call(r.data_selection_draggable&&t.drag?u.behavior.drag().origin(Object).on("drag",function(){t.drag(u.mouse(this))}).on("dragstart",function(){t.dragstart(u.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})};t.dispatchEvent=function(t,r,u){var f=this,l="."+i.eventRect+(f.isMultipleX()?"":"-"+r),e=f.main.select(l).node(),o=e.getBoundingClientRect(),s=o.left+(u?u[0]:0),h=o.top+(u?u[1]:0),c=document.createEvent("MouseEvents");c.initMouseEvent(t,!0,!0,n,0,s,h,s,h,!1,!1,!1,!1,0,null);e.dispatchEvent(c)};t.getCurrentWidth=function(){var n=this,t=n.config;return t.size_width?t.size_width:n.getParentWidth()};t.getCurrentHeight=function(){var n=this,t=n.config,i=t.size_height?t.size_height:n.getParentHeight();return i>0?i:320/(n.hasType("gauge")?2:1)};t.getCurrentPaddingTop=function(){var n=this.config;return f(n.padding_top)?n.padding_top:0};t.getCurrentPaddingBottom=function(){var n=this.config;return f(n.padding_bottom)?n.padding_bottom:0};t.getCurrentPaddingLeft=function(n){var i=this,t=i.config;return f(t.padding_left)?t.padding_left:t.axis_rotated?t.axis_x_show?Math.max(p(i.getAxisWidthByAxisId("x",n)),40):1:!t.axis_y_show||t.axis_y_inner?i.axis.getYAxisLabelPosition().isOuter?30:1:p(i.getAxisWidthByAxisId("y",n))};t.getCurrentPaddingRight=function(){var n=this,t=n.config,i=n.isLegendRight?n.getLegendWidth()+20:0;return f(t.padding_right)?t.padding_right+1:t.axis_rotated?10+i:!t.axis_y2_show||t.axis_y2_inner?2+i+(n.axis.getY2AxisLabelPosition().isOuter?20:0):p(n.getAxisWidthByAxisId("y2"))+i};t.getParentRectValue=function(n){for(var i,t=this.selectChart.node();t&&"BODY"!==t.tagName;){try{i=t.getBoundingClientRect()[n]}catch(r){"width"===n&&(i=t.offsetWidth)}if(i)break;t=t.parentNode}return i};t.getParentWidth=function(){return this.getParentRectValue("width")};t.getParentHeight=function(){var n=this.selectChart.style("height");return n.indexOf("px")>0?+n.replace("px",""):0};t.getSvgLeft=function(n){var t=this,r=t.config,e=r.axis_rotated||!r.axis_rotated&&!r.axis_y_inner,o=r.axis_rotated?i.axisX:i.axisY,u=t.main.select("."+o).node(),s=u&&e?u.getBoundingClientRect():{right:0},h=t.selectChart.node().getBoundingClientRect(),c=t.hasArcType(),f=s.right-h.left-(c?0:t.getCurrentPaddingLeft(n));return f>0?f:0};t.getAxisWidthByAxisId=function(n,t){var i=this,r=i.axis.getLabelPositionById(n);return i.axis.getMaxTickWidth(n,t)+(r.isInner?20:40)};t.getHorizontalAxisHeight=function(n){var i=this,t=i.config,r=30;return"x"!==n||t.axis_x_show?"x"===n&&t.axis_x_height?t.axis_x_height:"y"!==n||t.axis_y_show?"y2"!==n||t.axis_y2_show?("x"===n&&!t.axis_rotated&&t.axis_x_tick_rotate&&(r=30+i.axis.getMaxTickWidth(n)*Math.cos(Math.PI*(90-t.axis_x_tick_rotate)/180)),r+(i.axis.getLabelPositionById(n).isInner?0:10)+("y2"===n?-10:0)):i.rotated_padding_top:!t.legend_show||i.isLegendRight||i.isLegendInset?1:10:8};t.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};t.getShapeIndices=function(n){var t,r,f=this,u=f.config,i={},e=0;return f.filterTargetsToShow(f.data.targets.filter(n,f)).forEach(function(n){for(t=0;t<u.data_groups.length;t++)if(!(u.data_groups[t].indexOf(n.id)<0))for(r=0;r<u.data_groups[t].length;r++)if(u.data_groups[t][r]in i){i[n.id]=i[u.data_groups[t][r]];break}c(i[n.id])&&(i[n.id]=e++)}),i.__max__=e-1,i};t.getShapeX=function(n,t,i,r){var u=this,f=r?u.subX:u.x;return function(r){var u=r.id in i?i[r.id]:0;return r.x||0===r.x?f(r.x)-n*(t/2-u):0}};t.getShapeY=function(n){var t=this;return function(i){var r=n?t.getSubYScale(i.id):t.getYScale(i.id);return r(i.value)}};t.getShapeOffset=function(n,t,i){var r=this,u=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(n,r))),f=u.map(function(n){return n.id});return function(n,e){var o=i?r.getSubYScale(n.id):r.getYScale(n.id),s=o(0),h=s;return u.forEach(function(i){var u=r.isStepType(n)?r.convertValuesToStep(i.values):i.values;i.id!==n.id&&t[i.id]===t[n.id]&&f.indexOf(i.id)<f.indexOf(n.id)&&u[e].value*n.value>=0&&(h+=o(u[e].value)-s)}),h}};t.isWithinShape=function(n,t){var u,r=this,f=r.d3.select(n);return r.isTargetToShow(t.id)?"circle"===n.nodeName?u=r.isStepType(t)?r.isWithinStep(n,r.getYScale(t.id)(t.value)):r.isWithinCircle(n,1.5*r.pointSelectR(t)):"path"===n.nodeName&&(u=f.classed(i.bar)?r.isWithinBar(n):!0):u=!1,u};t.getInterpolate=function(n){var t=this;return t.isSplineType(n)?"cardinal":t.isStepType(n)?t.config.line_step_type:"linear"};t.initLine=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartLines)};t.updateTargetsForLine=function(n){var u,r,t=this,e=t.config,f=t.classChartLine.bind(t),o=t.classLines.bind(t),s=t.classAreas.bind(t),h=t.classCircles.bind(t),c=t.classFocus.bind(t);u=t.main.select("."+i.chartLines).selectAll("."+i.chartLine).data(n).attr("class",function(n){return f(n)+c(n)});r=u.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");r.append("g").attr("class",o);r.append("g").attr("class",s);r.append("g").attr("class",function(n){return t.generateClass(i.selectedCircles,n.id)});r.append("g").attr("class",h).style("cursor",function(n){return e.data_selection_isselectable(n)?"pointer":null});n.forEach(function(n){t.main.selectAll("."+i.selectedCircles+t.getTargetSelectorSuffix(n.id)).selectAll("."+i.selectedCircle).each(function(t){t.value=n.values[t.index].value})})};t.updateLine=function(n){var t=this;t.mainLine=t.main.selectAll("."+i.lines).selectAll("."+i.line).data(t.lineData.bind(t));t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(n){return t.isStepType(n)?"crispEdges":""}).attr("transform",null);t.mainLine.exit().transition().duration(n).style("opacity",0).remove()};t.redrawLine=function(n,t){return[(t?this.mainLine.transition():this.mainLine).attr("d",n).style("stroke",this.color).style("opacity",1)]};t.generateDrawLine=function(n,t){var i=this,r=i.config,u=i.d3.svg.line(),s=i.generateGetLinePoints(n,t),f=t?i.getSubYScale:i.getYScale,e=function(n){return(t?i.subxx:i.xx).call(i,n)},o=function(n,t){return r.data_groups.length>0?s(n,t)[0][1]:f.call(i,n.id)(n.value)};return u=r.axis_rotated?u.x(o).y(e):u.x(e).y(o),r.line_connectNull||(u=u.defined(function(n){return null!=n.value})),function(n){var o,e=r.line_connectNull?i.filterRemoveNull(n.values):n.values,c=t?i.x:i.subX,l=f.call(i,n.id),s=0,h=0;return i.isLineType(n)?r.data_regions[n.id]?o=i.lineWithRegions(e,c,l,r.data_regions[n.id]):(i.isStepType(n)&&(e=i.convertValuesToStep(e)),o=u.interpolate(i.getInterpolate(n))(e)):(e[0]&&(s=c(e[0].x),h=l(e[0].value)),o=r.axis_rotated?"M "+h+" "+s:"M "+s+" "+h),o?o:"M 0 0"}};t.generateGetLinePoints=function(n,t){var i=this,r=i.config,u=n.__max__+1,f=i.getShapeX(0,u,n,!!t),e=i.getShapeY(!!t),o=i.getShapeOffset(i.isLineType,n,!!t),s=t?i.getSubYScale:i.getYScale;return function(n,t){var u=s.call(i,n.id)(0),c=o(n,t)||u,l=f(n),h=e(n);return r.axis_rotated&&(0<n.value&&u>h||n.value<0&&h>u)&&(h=u),[[l,h-(u-c)],[l,h-(u-c)],[l,h-(u-c)],[l,h-(u-c)]]}};t.lineWithRegions=function(n,t,i,r){function rt(n,t){for(var i=0;i<t.length;i++)if(t[i].start<n&&n<=t[i].end)return!0;return!1}function p(n){return"M"+n[0][0]+" "+n[0][1]+" "+n[1][0]+" "+n[1][1]}var u,l,w,o,e,b,k,d,a,g,nt,tt,f=this,v=f.config,ut=-1,y="M",it=f.isCategorized()?.5:0,h=[];if(s(r))for(u=0;u<r.length;u++)h[u]={},h[u].start=c(r[u].start)?n[0].x:f.isTimeSeries()?f.parseDate(r[u].start):r[u].start,h[u].end=c(r[u].end)?n[n.length-1].x:f.isTimeSeries()?f.parseDate(r[u].end):r[u].end;for(nt=v.axis_rotated?function(n){return i(n.value)}:function(n){return t(n.x)},tt=v.axis_rotated?function(n){return t(n.x)}:function(n){return i(n.value)},w=f.isTimeSeries()?function(n,r,u,f){var o,s=n.x.getTime(),h=r.x-n.x,c=new Date(s+h*u),l=new Date(s+h*(u+f));return o=v.axis_rotated?[[i(e(u)),t(c)],[i(e(u+f)),t(l)]]:[[t(c),i(e(u))],[t(l),i(e(u+f))]],p(o)}:function(n,r,u,f){var s;return s=v.axis_rotated?[[i(e(u),!0),t(o(u))],[i(e(u+f),!0),t(o(u+f))]]:[[t(o(u),!0),i(e(u))],[t(o(u+f),!0),i(e(u+f))]],p(s)},u=0;u<n.length;u++){if(c(h)||!rt(n[u].x,h))y+=" "+nt(n[u])+" "+tt(n[u]);else for(o=f.getScale(n[u-1].x+it,n[u].x+it,f.isTimeSeries()),e=f.getScale(n[u-1].value,n[u].value),b=t(n[u].x)-t(n[u-1].x),k=i(n[u].value)-i(n[u-1].value),d=Math.sqrt(Math.pow(b,2)+Math.pow(k,2)),a=2/d,g=2*a,l=a;1>=l;l+=g)y+=w(n[u-1],n[u],l,a);ut=n[u].x}return y};t.updateArea=function(n){var t=this,r=t.d3;t.mainArea=t.main.selectAll("."+i.areas).selectAll("."+i.area).data(t.lineData.bind(t));t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+r.select(this).style("opacity"),0});t.mainArea.style("opacity",t.orgAreaOpacity);t.mainArea.exit().transition().duration(n).style("opacity",0).remove()};t.redrawArea=function(n,t){return[(t?this.mainArea.transition():this.mainArea).attr("d",n).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};t.generateDrawArea=function(n,t){var i=this,r=i.config,u=i.d3.svg.area(),f=i.generateGetAreaPoints(n,t),e=t?i.getSubYScale:i.getYScale,o=function(n){return(t?i.subxx:i.xx).call(i,n)},s=function(n,t){return r.data_groups.length>0?f(n,t)[0][1]:e.call(i,n.id)(i.getAreaBaseValue(n.id))},h=function(n,t){return r.data_groups.length>0?f(n,t)[1][1]:e.call(i,n.id)(n.value)};return u=r.axis_rotated?u.x0(s).x1(h).y(o):u.x(o).y0(s).y1(h),r.line_connectNull||(u=u.defined(function(n){return null!==n.value})),function(n){var f,t=r.line_connectNull?i.filterRemoveNull(n.values):n.values,e=0,o=0;return i.isAreaType(n)?(i.isStepType(n)&&(t=i.convertValuesToStep(t)),f=u.interpolate(i.getInterpolate(n))(t)):(t[0]&&(e=i.x(t[0].x),o=i.getYScale(n.id)(t[0].value)),f=r.axis_rotated?"M "+o+" "+e:"M "+e+" "+o),f?f:"M 0 0"}};t.getAreaBaseValue=function(){return 0};t.generateGetAreaPoints=function(n,t){var i=this,r=i.config,u=n.__max__+1,f=i.getShapeX(0,u,n,!!t),e=i.getShapeY(!!t),o=i.getShapeOffset(i.isAreaType,n,!!t),s=t?i.getSubYScale:i.getYScale;return function(n,t){var u=s.call(i,n.id)(0),c=o(n,t)||u,l=f(n),h=e(n);return r.axis_rotated&&(0<n.value&&u>h||n.value<0&&h>u)&&(h=u),[[l,c],[l,h-(u-c)],[l,h-(u-c)],[l,c]]}};t.updateCircle=function(){var n=this;n.mainCircle=n.main.selectAll("."+i.circles).selectAll("."+i.circle).data(n.lineOrScatterData.bind(n));n.mainCircle.enter().append("circle").attr("class",n.classCircle.bind(n)).attr("r",n.pointR.bind(n)).style("fill",n.color);n.mainCircle.style("opacity",n.initialOpacityForCircle.bind(n));n.mainCircle.exit().remove()};t.redrawCircle=function(n,t,r){var u=this.main.selectAll("."+i.selectedCircle);return[(r?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",n).attr("cy",t),(r?u.transition():u).attr("cx",n).attr("cy",t)]};t.circleX=function(n){return n.x||0===n.x?this.x(n.x):null};t.updateCircleY=function(){var t,i,n=this;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),i=n.generateGetLinePoints(t),n.circleY=function(n,t){return i(n,t)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}};t.getCircles=function(n,t){var r=this;return(t?r.main.selectAll("."+i.circles+r.getTargetSelectorSuffix(t)):r.main).selectAll("."+i.circle+(f(n)?"-"+n:""))};t.expandCircles=function(n,t,r){var u=this,f=u.pointExpandedR.bind(u);r&&u.unexpandCircles();u.getCircles(n,t).classed(i.EXPANDED,!0).attr("r",f)};t.unexpandCircles=function(n){var t=this,r=t.pointR.bind(t);t.getCircles(n).filter(function(){return t.d3.select(this).classed(i.EXPANDED)}).classed(i.EXPANDED,!1).attr("r",r)};t.pointR=function(n){var i=this,t=i.config;return i.isStepType(n)?0:a(t.point_r)?t.point_r(n):t.point_r};t.pointExpandedR=function(n){var t=this,i=t.config;return i.point_focus_expand_enabled?i.point_focus_expand_r?i.point_focus_expand_r:1.75*t.pointR(n):t.pointR(n)};t.pointSelectR=function(n){var t=this,i=t.config;return i.point_select_r?i.point_select_r:4*t.pointR(n)};t.isWithinCircle=function(n,t){var i=this.d3,r=i.mouse(n),u=i.select(n),f=+u.attr("cx"),e=+u.attr("cy");return Math.sqrt(Math.pow(f-r[0],2)+Math.pow(e-r[1],2))<t};t.isWithinStep=function(n,t){return Math.abs(t-this.d3.mouse(n)[1])<30};t.initBar=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartBars)};t.updateTargetsForBar=function(n){var r,u,t=this,e=t.config,f=t.classChartBar.bind(t),o=t.classBars.bind(t),s=t.classFocus.bind(t);r=t.main.select("."+i.chartBars).selectAll("."+i.chartBar).data(n).attr("class",function(n){return f(n)+s(n)});u=r.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");u.append("g").attr("class",o).style("cursor",function(n){return e.data_selection_isselectable(n)?"pointer":null})};t.updateBar=function(n){var t=this,u=t.barData.bind(t),f=t.classBar.bind(t),e=t.initialOpacity.bind(t),r=function(n){return t.color(n.id)};t.mainBar=t.main.selectAll("."+i.bars).selectAll("."+i.bar).data(u);t.mainBar.enter().append("path").attr("class",f).style("stroke",r).style("fill",r);t.mainBar.style("opacity",e);t.mainBar.exit().transition().duration(n).style("opacity",0).remove()};t.redrawBar=function(n,t){return[(t?this.mainBar.transition():this.mainBar).attr("d",n).style("fill",this.color).style("opacity",1)]};t.getBarW=function(n,t){var u=this,i=u.config,r="number"==typeof i.bar_width?i.bar_width:t?n.tickInterval()*i.bar_width_ratio/t:0;return i.bar_width_max&&r>i.bar_width_max?i.bar_width_max:r};t.getBars=function(n,t){var r=this;return(t?r.main.selectAll("."+i.bars+r.getTargetSelectorSuffix(t)):r.main).selectAll("."+i.bar+(f(n)?"-"+n:""))};t.expandBars=function(n,t,r){var u=this;r&&u.unexpandBars();u.getBars(n,t).classed(i.EXPANDED,!0)};t.unexpandBars=function(n){var t=this;t.getBars(n).classed(i.EXPANDED,!1)};t.generateDrawBar=function(n,t){var i=this,r=i.config,u=i.generateGetBarPoints(n,t);return function(n,t){var i=u(n,t),f=r.axis_rotated?1:0,e=r.axis_rotated?0:1;return"M "+i[0][f]+","+i[0][e]+" L"+i[1][f]+","+i[1][e]+" L"+i[2][f]+","+i[2][e]+" L"+i[3][f]+","+i[3][e]+" z"}};t.generateGetBarPoints=function(n,t){var i=this,f=t?i.subXAxis:i.xAxis,u=n.__max__+1,r=i.getBarW(f,u),e=i.getShapeX(r,u,n,!!t),o=i.getShapeY(!!t),s=i.getShapeOffset(i.isBarType,n,!!t),h=t?i.getSubYScale:i.getYScale;return function(n,t){var u=h.call(i,n.id)(0),c=s(n,t)||u,l=e(n),f=o(n);return i.config.axis_rotated&&(0<n.value&&u>f||n.value<0&&f>u)&&(f=u),[[l,c],[l,f-(u-c)],[l+r,f-(u-c)],[l+r,c]]}};t.isWithinBar=function(n){var t=this.d3.mouse(n),r=n.getBoundingClientRect(),u=n.pathSegList.getItem(0),f=n.pathSegList.getItem(1),e=Math.min(u.x,f.x),o=Math.min(u.y,f.y),s=r.width,h=r.height,i=2,c=e-i,l=e+s+i,a=o+h+i,v=o-i;return c<t[0]&&t[0]<l&&v<t[1]&&t[1]<a};t.initText=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartTexts);n.mainText=n.d3.selectAll([])};t.updateTargetsForText=function(n){var r,u,t=this,f=t.classChartText.bind(t),e=t.classTexts.bind(t),o=t.classFocus.bind(t);r=t.main.select("."+i.chartTexts).selectAll("."+i.chartText).data(n).attr("class",function(n){return f(n)+o(n)});u=r.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");u.append("g").attr("class",e)};t.updateText=function(n){var t=this,r=t.config,u=t.barOrLineData.bind(t),f=t.classText.bind(t);t.mainText=t.main.selectAll("."+i.texts).selectAll("."+i.text).data(u);t.mainText.enter().append("text").attr("class",f).attr("text-anchor",function(n){return r.axis_rotated?n.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(n){return t.color(n)}).style("fill-opacity",0);t.mainText.text(function(n,i,r){return t.dataLabelFormat(n.id)(n.value,n.id,i,r)});t.mainText.exit().transition().duration(n).style("fill-opacity",0).remove()};t.redrawText=function(n,t,i,r){return[(r?this.mainText.transition():this.mainText).attr("x",n).attr("y",t).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]};t.getTextRect=function(n,t){var i,r=this.d3.select("body").append("div").classed("c3",!0),u=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);return u.selectAll(".dummy").data([n]).enter().append("text").classed(t?t:"",!0).text(n).each(function(){i=this.getBoundingClientRect()}),r.remove(),i};t.generateXYForText=function(n,t,i,r){var u=this,f=u.generateGetAreaPoints(n,!1),e=u.generateGetBarPoints(t,!1),o=u.generateGetLinePoints(i,!1),s=r?u.getXForText:u.getYForText;return function(n,t){var i=u.isAreaType(n)?f:u.isBarType(n)?e:o;return s.call(u,i(n,t),n,this)}};t.getXForText=function(n,t,i){var r,f,u=this,e=i.getBoundingClientRect();return u.config.axis_rotated?(f=u.isBarType(t)?4:6,r=n[2][1]+f*(t.value<0?-1:1)):r=u.hasType("bar")?(n[2][0]+n[0][0])/2:n[0][0],null===t.value&&(r>u.width?r=u.width-e.width:0>r&&(r=4)),r};t.getYForText=function(n,t,i){var r,u=this,f=i.getBoundingClientRect();return u.config.axis_rotated?r=(n[0][0]+n[2][0]+.6*f.height)/2:(r=n[2][1],t.value<0?(r+=f.height,u.isBarType(t)&&u.isSafari()?r-=3:!u.isBarType(t)&&u.isChrome()&&(r+=3)):r+=u.isBarType(t)?-3:-6),null!==t.value||u.config.axis_rotated||(r<f.height?r=f.height:r>this.height&&(r=this.height-4)),r};t.setTargetType=function(n,t){var i=this,r=i.config;i.mapToTargetIds(n).forEach(function(n){i.withoutFadeIn[n]=t===r.data_types[n];r.data_types[n]=t});n||(r.data_type=t)};t.hasType=function(n,t){var u=this,i=u.config.data_types,r=!1;return t=t||u.data.targets,t&&t.length?t.forEach(function(t){var u=i[t.id];(u&&u.indexOf(n)>=0||!u&&"line"===n)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===n&&(r=!0)}):r=u.config.data_type===n,r};t.hasArcType=function(n){return this.hasType("pie",n)||this.hasType("donut",n)||this.hasType("gauge",n)};t.isLineType=function(n){var t=this.config,i=o(n)?n:n.id;return!t.data_types[i]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[i])>=0};t.isStepType=function(n){var t=o(n)?n:n.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0};t.isSplineType=function(n){var t=o(n)?n:n.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0};t.isAreaType=function(n){var t=o(n)?n:n.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0};t.isBarType=function(n){var t=o(n)?n:n.id;return"bar"===this.config.data_types[t]};t.isScatterType=function(n){var t=o(n)?n:n.id;return"scatter"===this.config.data_types[t]};t.isPieType=function(n){var t=o(n)?n:n.id;return"pie"===this.config.data_types[t]};t.isGaugeType=function(n){var t=o(n)?n:n.id;return"gauge"===this.config.data_types[t]};t.isDonutType=function(n){var t=o(n)?n:n.id;return"donut"===this.config.data_types[t]};t.isArcType=function(n){return this.isPieType(n)||this.isDonutType(n)||this.isGaugeType(n)};t.lineData=function(n){return this.isLineType(n)?[n]:[]};t.arcData=function(n){return this.isArcType(n.data)?[n]:[]};t.barData=function(n){return this.isBarType(n)?n.values:[]};t.lineOrScatterData=function(n){return this.isLineType(n)||this.isScatterType(n)?n.values:[]};t.barOrLineData=function(n){return this.isBarType(n)||this.isLineType(n)?n.values:[]};t.initGrid=function(){var n=this,t=n.config,r=n.d3;n.grid=n.main.append("g").attr("clip-path",n.clipPathForGrid).attr("class",i.grid);t.grid_x_show&&n.grid.append("g").attr("class",i.xgrids);t.grid_y_show&&n.grid.append("g").attr("class",i.ygrids);t.grid_focus_show&&n.grid.append("g").attr("class",i.xgridFocus).append("line").attr("class",i.xgridFocus);n.xgrid=r.selectAll([]);t.grid_lines_front||n.initGridLines()};t.initGridLines=function(){var n=this,t=n.d3;n.gridLines=n.main.append("g").attr("clip-path",n.clipPathForGrid).attr("class",i.grid+" "+i.gridLines);n.gridLines.append("g").attr("class",i.xgridLines);n.gridLines.append("g").attr("class",i.ygridLines);n.xgridLines=t.selectAll([])};t.updateXGrid=function(n){var t=this,r=t.config,f=t.d3,e=t.generateGridData(r.grid_x_type,t.x),u=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=r.axis_rotated?{x1:0,x2:t.width,y1:function(n){return t.x(n)-u},y2:function(n){return t.x(n)-u}}:{x1:function(n){return t.x(n)+u},x2:function(n){return t.x(n)+u},y1:0,y2:t.height};t.xgrid=t.main.select("."+i.xgrids).selectAll("."+i.xgrid).data(e);t.xgrid.enter().append("line").attr("class",i.xgrid);n||t.xgrid.attr(t.xgridAttr).style("opacity",function(){return+f.select(this).attr(r.axis_rotated?"y1":"x1")===(r.axis_rotated?t.height:0)?0:1});t.xgrid.exit().remove()};t.updateYGrid=function(){var n=this,t=n.config,r=n.yAxis.tickValues()||n.y.ticks(t.grid_y_ticks);n.ygrid=n.main.select("."+i.ygrids).selectAll("."+i.ygrid).data(r);n.ygrid.enter().append("line").attr("class",i.ygrid);n.ygrid.attr("x1",t.axis_rotated?n.y:0).attr("x2",t.axis_rotated?n.y:n.width).attr("y1",t.axis_rotated?0:n.y).attr("y2",t.axis_rotated?n.height:n.y);n.ygrid.exit().remove();n.smoothLines(n.ygrid,"grid")};t.gridTextAnchor=function(n){return n.position?n.position:"end"};t.gridTextDx=function(n){return"start"===n.position?4:"middle"===n.position?0:-4};t.xGridTextX=function(n){return"start"===n.position?-this.height:"middle"===n.position?-this.height/2:0};t.yGridTextX=function(n){return"start"===n.position?0:"middle"===n.position?this.width/2:this.width};t.updateGrid=function(n){var f,e,u,t=this,o=t.main,r=t.config;t.grid.style("visibility",t.hasArcType()?"hidden":"visible");o.select("line."+i.xgridFocus).style("visibility","hidden");r.grid_x_show&&t.updateXGrid();t.xgridLines=o.select("."+i.xgridLines).selectAll("."+i.xgridLine).data(r.grid_x_lines);f=t.xgridLines.enter().append("g").attr("class",function(n){return i.xgridLine+(n["class"]?" "+n["class"]:"")});f.append("line").style("opacity",0);f.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"":"rotate(-90)").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);t.xgridLines.exit().transition().duration(n).style("opacity",0).remove();r.grid_y_show&&t.updateYGrid();t.ygridLines=o.select("."+i.ygridLines).selectAll("."+i.ygridLine).data(r.grid_y_lines);e=t.ygridLines.enter().append("g").attr("class",function(n){return i.ygridLine+(n["class"]?" "+n["class"]:"")});e.append("line").style("opacity",0);e.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"rotate(-90)":"").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);u=t.yv.bind(t);t.ygridLines.select("line").transition().duration(n).attr("x1",r.axis_rotated?u:0).attr("x2",r.axis_rotated?u:t.width).attr("y1",r.axis_rotated?0:u).attr("y2",r.axis_rotated?t.height:u).style("opacity",1);t.ygridLines.select("text").transition().duration(n).attr("x",r.axis_rotated?t.xGridTextX.bind(t):t.yGridTextX.bind(t)).attr("y",u).text(function(n){return n.text}).style("opacity",1);t.ygridLines.exit().transition().duration(n).style("opacity",0).remove()};t.redrawGrid=function(n){var t=this,i=t.config,r=t.xv.bind(t),u=t.xgridLines.select("line"),f=t.xgridLines.select("text");return[(n?u.transition():u).attr("x1",i.axis_rotated?0:r).attr("x2",i.axis_rotated?t.width:r).attr("y1",i.axis_rotated?r:0).attr("y2",i.axis_rotated?r:t.height).style("opacity",1),(n?f.transition():f).attr("x",i.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",r).text(function(n){return n.text}).style("opacity",1)]};t.showXGridFocus=function(n){var t=this,r=t.config,o=n.filter(function(n){return n&&f(n.value)}),u=t.main.selectAll("line."+i.xgridFocus),e=t.xx.bind(t);r.tooltip_show&&(t.hasType("scatter")||t.hasArcType()||(u.style("visibility","visible").data([o[0]]).attr(r.axis_rotated?"y1":"x1",e).attr(r.axis_rotated?"y2":"x2",e),t.smoothLines(u,"grid")))};t.hideXGridFocus=function(){this.main.select("line."+i.xgridFocus).style("visibility","hidden")};t.updateXgridFocus=function(){var n=this,t=n.config;n.main.select("line."+i.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?n.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:n.height)};t.generateGridData=function(n,t){var f,e,o,u,s=this,r=[],h=s.main.select("."+i.axisX).selectAll(".tick").size();if("year"===n)for(f=s.getXDomain(),e=f[0].getFullYear(),o=f[1].getFullYear(),u=e;o>=u;u++)r.push(new Date(u+"-01-01 00:00:00"));else r=t.ticks(10),r.length>h&&(r=r.filter(function(n){return(""+n).indexOf(".")<0}));return r};t.getGridFilterToRemove=function(n){return n?function(t){var i=!1;return[].concat(n).forEach(function(n){("value"in n&&t.value===n.value||"class"in n&&t["class"]===n["class"])&&(i=!0)}),i}:function(){return!0}};t.removeGridLines=function(n,t){var u=this,r=u.config,f=u.getGridFilterToRemove(n),e=function(n){return!f(n)},o=t?i.xgridLines:i.ygridLines,s=t?i.xgridLine:i.ygridLine;u.main.select("."+o).selectAll("."+s).filter(f).transition().duration(r.transition_duration).style("opacity",0).remove();t?r.grid_x_lines=r.grid_x_lines.filter(e):r.grid_y_lines=r.grid_y_lines.filter(e)};t.initTooltip=function(){var r,n=this,t=n.config;if(n.tooltip=n.selectChart.style("position","relative").append("div").attr("class",i.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),t.tooltip_init_show){if(n.isTimeSeries()&&o(t.tooltip_init_x)){for(t.tooltip_init_x=n.parseDate(t.tooltip_init_x),r=0;r<n.data.targets[0].values.length&&n.data.targets[0].values[r].x-t.tooltip_init_x!=0;r++);t.tooltip_init_x=r}n.tooltip.html(t.tooltip_contents.call(n,n.data.targets.map(function(i){return n.addName(i.values[t.tooltip_init_x])}),n.axis.getXAxisTickFormat(),n.getYFormat(n.hasArcType()),n.color));n.tooltip.style("top",t.tooltip_init_position.top).style("left",t.tooltip_init_position.left).style("display","block")}};t.getTooltipContent=function(n,t,r,u){for(var e,o,s,l,a,h=this,c=h.config,v=c.tooltip_format_title||t,y=c.tooltip_format_name||function(n){return n},p=c.tooltip_format_value||r,f=0;f<n.length;f++)n[f]&&(n[f].value||0===n[f].value)&&(e||(o=v?v(n[f].x):n[f].x,e="<table class='"+i.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"<\/th><\/tr>":"")),s=p(n[f].value,n[f].ratio,n[f].id,n[f].index),void 0!==s&&(l=y(n[f].name,n[f].ratio,n[f].id,n[f].index),a=h.levelColor?h.levelColor(n[f].value):u(n[f].id),e+="<tr class='"+i.tooltipName+"-"+n[f].id+"'>",e+="<td class='name'><span style='background-color:"+a+"'><\/span>"+l+"<\/td>",e+="<td class='value'>"+s+"<\/td>",e+="<\/tr>"));return e+"<\/table>"};t.tooltipPosition=function(n,t,i,r){var o,e,s,f,h,u=this,l=u.config,a=u.d3,v=u.hasArcType(),c=a.mouse(r);return v?(e=(u.width-(u.isLegendRight?u.getLegendWidth():0))/2+c[0],f=u.height/2+c[1]+20):(o=u.getSvgLeft(!0),l.axis_rotated?(e=o+c[0]+100,s=e+t,h=u.currentWidth-u.getCurrentPaddingRight(),f=u.x(n[0].x)+20):(e=o+u.getCurrentPaddingLeft(!0)+u.x(n[0].x)+20,s=e+t,h=o+u.currentWidth-u.getCurrentPaddingRight(),f=c[1]+15),s>h&&(e-=s-h+20),f+i>u.currentHeight&&(f-=i+30)),0>f&&(f=0),{top:f,left:e}};t.showTooltip=function(n,i){var o,s,u,r=this,e=r.config,c=r.hasArcType(),h=n.filter(function(n){return n&&f(n.value)}),l=e.tooltip_position||t.tooltipPosition;0!==h.length&&e.tooltip_show&&(r.tooltip.html(e.tooltip_contents.call(r,n,r.axis.getXAxisTickFormat(),r.getYFormat(c),r.color)).style("display","block"),o=r.tooltip.property("offsetWidth"),s=r.tooltip.property("offsetHeight"),u=l.call(this,h,o,s,i),r.tooltip.style("top",u.top+"px").style("left",u.left+"px"))};t.hideTooltip=function(){this.tooltip.style("display","none")};t.initLegend=function(){var n=this;return n.legendItemTextBox={},n.legendHasRendered=!1,n.legend=n.svg.append("g").attr("transform",n.getTranslate("legend")),n.config.legend_show?void n.updateLegendWithDefaults():(n.legend.style("visibility","hidden"),void(n.hiddenLegendIds=n.mapToIds(n.data.targets)))};t.updateLegendWithDefaults=function(){var n=this;n.updateLegend(n.mapToIds(n.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};t.updateSizeForLegend=function(n,t){var i=this,r=i.config,u={top:i.isLegendTop?i.getCurrentPaddingTop()+r.legend_inset_y+5.5:i.currentHeight-n-i.getCurrentPaddingBottom()-r.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+r.legend_inset_x+.5:i.currentWidth-t-i.getCurrentPaddingRight()-r.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?u.top:i.currentHeight-n,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-t:i.isLegendInset?u.left:0}};t.transformLegend=function(n){var t=this;(n?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))};t.updateLegendStep=function(n){this.legendStep=n};t.updateLegendItemWidth=function(n){this.legendItemWidth=n};t.updateLegendItemHeight=function(n){this.legendItemHeight=n};t.getLegendWidth=function(){var n=this;return n.config.legend_show?n.isLegendRight||n.isLegendInset?n.legendItemWidth*(n.legendStep+1):n.currentWidth:0};t.getLegendHeight=function(){var n=this,t=0;return n.config.legend_show&&(t=n.isLegendRight?n.currentHeight:Math.max(20,n.legendItemHeight)*(n.legendStep+1)),t};t.opacityForLegend=function(n){return n.classed(i.legendItemHidden)?null:1};t.opacityForUnfocusedLegend=function(n){return n.classed(i.legendItemHidden)?null:.3};t.toggleFocusLegend=function(n,t){var r=this;n=r.mapToTargetIds(n);r.legend.selectAll("."+i.legendItem).filter(function(t){return n.indexOf(t)>=0}).classed(i.legendItemFocused,t).transition().duration(100).style("opacity",function(){var n=t?r.opacityForLegend:r.opacityForUnfocusedLegend;return n.call(r,r.d3.select(this))})};t.revertLegend=function(){var n=this,t=n.d3;n.legend.selectAll("."+i.legendItem).classed(i.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return n.opacityForLegend(t.select(this))})};t.showLegend=function(n){var t=this,i=t.config;i.legend_show||(i.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults());t.removeHiddenLegendIds(n);t.legend.selectAll(t.selectorLegends(n)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})};t.hideLegend=function(n){var t=this,i=t.config;i.legend_show&&nt(n)&&(i.legend_show=!1,t.legend.style("visibility","hidden"));t.addHiddenLegendIds(n);t.legend.selectAll(t.selectorLegends(n)).style("opacity",0).style("visibility","hidden")};t.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};t.updateLegend=function(n,t,r){function lt(n,t){return u.legendItemTextBox[t]||(u.legendItemTextBox[t]=u.getTextRect(n.textContent,i.legendItem)),u.legendItemTextBox[t]}function st(t,i,r){function v(n,t){t||(e=(w-p-y)/2,ct>e&&(e=(w-y)/2,p=0,h++));l[n]=h;tt[h]=u.isLegendInset?10:e;b[n]=p;p+=y}var e,g,it=0===r,rt=r===n.length-1,nt=lt(t,i),s=nt.width+yt+(!rt||u.isLegendRight||u.isLegendInset?vt:0),a=nt.height+at,y=u.isLegendRight||u.isLegendInset?a:s,w=u.isLegendRight||u.isLegendInset?u.getLegendHeight():u.getLegendWidth();return it&&(p=0,h=0,o=0,c=0),f.legend_show&&!u.isLegendToShow(i)?void(k[i]=d[i]=l[i]=b[i]=0):(k[i]=s,d[i]=a,(!o||s>=o)&&(o=s),(!c||a>=c)&&(c=a),g=u.isLegendRight||u.isLegendInset?c:o,void(f.legend_equally?(Object.keys(k).forEach(function(n){k[n]=o}),Object.keys(d).forEach(function(n){d[n]=c}),e=(w-g*n.length)/2,ct>e?(p=0,h=0,n.forEach(function(n){v(n)})):v(i,!0)):v(i)))}var v,g,it,a,rt,ut,nt,w,ht,ft,et,ot,y,u=this,f=u.config,at=4,vt=10,o=0,c=0,ct=10,yt=15,p=0,b={},k={},d={},tt=[0],l={},h=0;t=t||{};w=e(t,"withTransition",!0);ht=e(t,"withTransitionForTransform",!0);u.isLegendInset&&(h=f.legend_inset_step?f.legend_inset_step:n.length,u.updateLegendStep(h));u.isLegendRight?(v=function(n){return o*l[n]},a=function(n){return tt[l[n]]+b[n]}):u.isLegendInset?(v=function(n){return o*l[n]+10},a=function(n){return tt[l[n]]+b[n]}):(v=function(n){return tt[l[n]]+b[n]},a=function(n){return c*l[n]});g=function(n,t){return v(n,t)+14};rt=function(n,t){return a(n,t)+9};it=function(n,t){return v(n,t)};ut=function(n,t){return a(n,t)-5};nt=u.legend.selectAll("."+i.legendItem).data(n).enter().append("g").attr("class",function(n){return u.generateClass(i.legendItem,n)}).style("visibility",function(n){return u.isLegendToShow(n)?"visible":"hidden"}).style("cursor","pointer").on("click",function(n){f.legend_item_onclick?f.legend_item_onclick.call(u,n):u.d3.event.altKey?(u.api.hide(),u.api.show(n)):(u.api.toggle(n),u.isTargetToShow(n)?u.api.focus(n):u.api.revert())}).on("mouseover",function(n){u.d3.select(this).classed(i.legendItemFocused,!0);!u.transiting&&u.isTargetToShow(n)&&u.api.focus(n);f.legend_item_onmouseover&&f.legend_item_onmouseover.call(u,n)}).on("mouseout",function(n){u.d3.select(this).classed(i.legendItemFocused,!1);u.api.revert();f.legend_item_onmouseout&&f.legend_item_onmouseout.call(u,n)});nt.append("text").text(function(n){return s(f.data_names[n])?f.data_names[n]:n}).each(function(n,t){st(this,n,t)}).style("pointer-events","none").attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:rt);nt.append("rect").attr("class",i.legendItemEvent).style("fill-opacity",0).attr("x",u.isLegendRight||u.isLegendInset?it:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:ut);nt.append("rect").attr("class",i.legendItemTile).style("pointer-events","none").style("fill",u.color).attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:a).attr("width",10).attr("height",10);y=u.legend.select("."+i.legendBackground+" rect");u.isLegendInset&&o>0&&0===y.size()&&(y=u.legend.insert("g","."+i.legendItem).attr("class",i.legendBackground).append("rect"));ft=u.legend.selectAll("text").data(n).text(function(n){return s(f.data_names[n])?f.data_names[n]:n}).each(function(n,t){st(this,n,t)});(w?ft.transition():ft).attr("x",g).attr("y",rt);et=u.legend.selectAll("rect."+i.legendItemEvent).data(n);(w?et.transition():et).attr("width",function(n){return k[n]}).attr("height",function(n){return d[n]}).attr("x",it).attr("y",ut);ot=u.legend.selectAll("rect."+i.legendItemTile).data(n);(w?ot.transition():ot).style("fill",u.color).attr("x",v).attr("y",a);y&&(w?y.transition():y).attr("height",u.getLegendHeight()-12).attr("width",o*(h+1)+10);u.legend.selectAll("."+i.legendItem).classed(i.legendItemHidden,function(n){return!u.isTargetToShow(n)});u.updateLegendItemWidth(o);u.updateLegendItemHeight(c);u.updateLegendStep(h);u.updateSizes();u.updateScales();u.updateSvgSize();u.transformAll(ht,r);u.legendHasRendered=!0};tt(b,u);u.prototype.init=function(){var n=this.owner,t=n.config,r=n.main;n.axes.x=r.append("g").attr("class",i.axis+" "+i.axisX).attr("clip-path",n.clipPathForXAxis).attr("transform",n.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden");n.axes.x.append("text").attr("class",i.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));n.axes.y=r.append("g").attr("class",i.axis+" "+i.axisY).attr("clip-path",t.axis_y_inner?"":n.clipPathForYAxis).attr("transform",n.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden");n.axes.y.append("text").attr("class",i.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));n.axes.y2=r.append("g").attr("class",i.axis+" "+i.axisY2).attr("transform",n.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden");n.axes.y2.append("text").attr("class",i.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};u.prototype.getXAxis=function(n,t,i,r,u,f,e){var o=this.owner,s=o.config,c={isCategory:o.isCategorized(),withOuterTick:u,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTextRotate:e?0:s.axis_x_tick_rotate,withoutTransition:f},h=g(o.d3,c).scale(n).orient(t);return o.isTimeSeries()&&r&&(r=r.map(function(n){return o.parseDate(n)})),h.tickFormat(i).tickValues(r),o.isCategorized()&&(h.tickCentered(s.axis_x_tick_centered),nt(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1)),h};u.prototype.updateXAxisTickValues=function(n,t){var i,r=this.owner,u=r.config;return(u.axis_x_tick_fit||u.axis_x_tick_count)&&(i=this.generateTickValues(r.mapTargetsToUniqueXs(n),u.axis_x_tick_count,r.isTimeSeries())),t?t.tickValues(i):(r.xAxis.tickValues(i),r.subXAxis.tickValues(i)),i};u.prototype.getYAxis=function(n,t,i,r,u,f){var c={withOuterTick:u,withoutTransition:f},e=this.owner,s=e.d3,h=e.config,o=g(s,c).scale(n).orient(t).tickFormat(i);return e.isTimeSeriesY()?o.ticks(s.time[h.axis_y_tick_time_value],h.axis_y_tick_time_interval):o.tickValues(r),o};u.prototype.getId=function(n){var t=this.owner.config;return n in t.data_axes?t.data_axes[n]:"y"};u.prototype.getXAxisTickFormat=function(){var n=this.owner,i=n.config,t=n.isTimeSeries()?n.defaultAxisTimeFormat:n.isCategorized()?n.categoryName:function(n){return 0>n?n.toFixed(0):n};return i.axis_x_tick_format&&(a(i.axis_x_tick_format)?t=i.axis_x_tick_format:n.isTimeSeries()&&(t=function(t){return t?n.axisTimeFormat(i.axis_x_tick_format)(t):""})),a(t)?function(i){return t.call(n,i)}:t};u.prototype.getTickValues=function(n,t){return n?n:t?t.tickValues():void 0};u.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)};u.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};u.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};u.prototype.getLabelOptionByAxisId=function(n){var t,r=this.owner,i=r.config;return"y"===n?t=i.axis_y_label:"y2"===n?t=i.axis_y2_label:"x"===n&&(t=i.axis_x_label),t};u.prototype.getLabelText=function(n){var t=this.getLabelOptionByAxisId(n);return o(t)?t:t?t.text:null};u.prototype.setLabelText=function(n,t){var u=this.owner,i=u.config,r=this.getLabelOptionByAxisId(n);o(r)?"y"===n?i.axis_y_label=t:"y2"===n?i.axis_y2_label=t:"x"===n&&(i.axis_x_label=t):r&&(r.text=t)};u.prototype.getLabelPosition=function(n,t){var r=this.getLabelOptionByAxisId(n),i=r&&"object"==typeof r&&r.position?r.position:t;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}};u.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};u.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getLabelPositionById=function(n){return"y2"===n?this.getY2AxisLabelPosition():"y"===n?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};u.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};u.prototype.textForYAxisLabel=function(){return this.getLabelText("y")};u.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};u.prototype.xForAxisLabel=function(n,t){var i=this.owner;return n?t.isLeft?0:t.isCenter?i.width/2:i.width:t.isBottom?-i.height:t.isMiddle?-i.height/2:0};u.prototype.dxForAxisLabel=function(n,t){return n?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"};u.prototype.textAnchorForAxisLabel=function(n,t){return n?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"};u.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dyForXAxisLabel=function(){var i=this.owner,n=i.config,t=this.getXAxisLabelPosition();return n.axis_rotated?t.isInner?"1.2em":-25-this.getMaxTickWidth("x"):t.isInner?"-0.5em":n.axis_x_height?n.axis_x_height-10:"3em"};u.prototype.dyForYAxisLabel=function(){var n=this.owner,t=this.getYAxisLabelPosition();return n.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(n.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};u.prototype.dyForY2AxisLabel=function(){var n=this.owner,t=this.getY2AxisLabelPosition();return n.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(n.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};u.prototype.textAnchorForXAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(!n.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.textAnchorForYAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.textAnchorForY2AxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.getMaxTickWidth=function(n,t){var u,r,f,o,s,i=this.owner,h=i.config,e=0;return t&&i.currentMaxTickWidths[n]?i.currentMaxTickWidths[n]:(i.svg&&(u=i.filterTargetsToShow(i.data.targets),"y"===n?(r=i.y.copy().domain(i.getYDomain(u,"y")),f=this.getYAxis(r,i.yOrient,h.axis_y_tick_format,i.yAxisTickValues,!1,!0)):"y2"===n?(r=i.y2.copy().domain(i.getYDomain(u,"y2")),f=this.getYAxis(r,i.y2Orient,h.axis_y2_tick_format,i.y2AxisTickValues,!1,!0)):(r=i.x.copy().domain(i.getXDomain(u)),f=this.getXAxis(r,i.xOrient,i.xAxisTickFormat,i.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(u,f)),o=i.d3.select("body").append("div").classed("c3",!0),s=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),s.append("g").call(f).each(function(){i.d3.select(this).selectAll("text").each(function(){var n=this.getBoundingClientRect();e<n.width&&(e=n.width)});o.remove()})),i.currentMaxTickWidths[n]=0>=e?i.currentMaxTickWidths[n]:e,i.currentMaxTickWidths[n])};u.prototype.updateLabels=function(n){var t=this.owner,r=t.main.select("."+i.axisX+" ."+i.axisXLabel),u=t.main.select("."+i.axisY+" ."+i.axisYLabel),f=t.main.select("."+i.axisY2+" ."+i.axisY2Label);(n?r.transition():r).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(n?u.transition():u).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(n?f.transition():f).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};u.prototype.getPadding=function(n,t,i,r){return f(n[t])?"ratio"===n.unit?n[t]*r:this.convertPixelsToAxisPadding(n[t],r):i};u.prototype.convertPixelsToAxisPadding=function(n,t){var i=this.owner,r=i.config.axis_rotated?i.width:i.height;return t*(n/r)};u.prototype.generateTickValues=function(n,t,i){var u,f,o,s,c,e,h,r=n;if(t)if(u=a(t)?t():t,1===u)r=[n[0]];else if(2===u)r=[n[0],n[n.length-1]];else if(u>2){for(s=u-2,f=n[0],o=n[n.length-1],c=(o-f)/(s+1),r=[f],e=0;s>e;e++)h=+f+c*(e+1),r.push(i?new Date(h):h);r.push(o)}return i||(r=r.sort(function(n,t){return n-t})),r};u.prototype.generateTransitions=function(n){var i=this.owner,t=i.axes;return{axisX:n?t.x.transition().duration(n):t.x,axisY:n?t.y.transition().duration(n):t.y,axisY2:n?t.y2.transition().duration(n):t.y2,axisSubX:n?t.subx.transition().duration(n):t.subx}};u.prototype.redraw=function(n,t){var i=this.owner;i.axes.x.style("opacity",t?0:1);i.axes.y.style("opacity",t?0:1);i.axes.y2.style("opacity",t?0:1);i.axes.subx.style("opacity",t?0:1);n.axisX.call(i.xAxis);n.axisY.call(i.yAxis);n.axisY2.call(i.y2Axis);n.axisSubX.call(i.subXAxis)};t.getClipPath=function(t){var i=n.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(i?"":document.URL.split("#")[0])+"#"+t+")"};t.appendClip=function(n,t){return n.append("clipPath").attr("id",t).append("rect")};t.getAxisClipX=function(n){var t=Math.max(30,this.margin.left);return n?-(1+t):-(t-1)};t.getAxisClipY=function(n){return n?-20:-this.margin.top};t.getXAxisClipX=function(){var n=this;return n.getAxisClipX(!n.config.axis_rotated)};t.getXAxisClipY=function(){var n=this;return n.getAxisClipY(!n.config.axis_rotated)};t.getYAxisClipX=function(){var n=this;return n.config.axis_y_inner?-1:n.getAxisClipX(n.config.axis_rotated)};t.getYAxisClipY=function(){var n=this;return n.getAxisClipY(n.config.axis_rotated)};t.getAxisClipWidth=function(n){var t=this,i=Math.max(30,t.margin.left),r=Math.max(30,t.margin.right);return n?t.width+2+i+r:t.margin.left+20};t.getAxisClipHeight=function(n){return(n?this.margin.bottom:this.margin.top+this.height)+20};t.getXAxisClipWidth=function(){var n=this;return n.getAxisClipWidth(!n.config.axis_rotated)};t.getXAxisClipHeight=function(){var n=this;return n.getAxisClipHeight(!n.config.axis_rotated)};t.getYAxisClipWidth=function(){var n=this;return n.getAxisClipWidth(n.config.axis_rotated)+(n.config.axis_y_inner?20:0)};t.getYAxisClipHeight=function(){var n=this;return n.getAxisClipHeight(n.config.axis_rotated)};t.initPie=function(){var n=this,t=n.d3,i=n.config;n.pie=t.layout.pie().value(function(n){return n.values.reduce(function(n,t){return n+t.value},0)});i.data_order||n.pie.sort(null)};t.updateRadius=function(){var n=this,t=n.config,i=t.gauge_width||t.donut_width;n.radiusExpanded=Math.min(n.arcWidth,n.arcHeight)/2;n.radius=.95*n.radiusExpanded;n.innerRadiusRatio=i?(n.radius-i)/n.radius:.6;n.innerRadius=n.hasType("donut")||n.hasType("gauge")?n.radius*n.innerRadiusRatio:0};t.updateArc=function(){var n=this;n.svgArc=n.getSvgArc();n.svgArcExpanded=n.getSvgArcExpanded();n.svgArcExpandedSub=n.getSvgArcExpanded(.98)};t.updateAngle=function(n){var f,e,t=this,o=t.config,r=!1,s=0,i=o.gauge_min,u=o.gauge_max;return t.pie(t.filterTargetsToShow(t.data.targets)).forEach(function(t){r||t.data.id!==n.data.id||(r=!0,n=t,n.index=s);s++}),isNaN(n.startAngle)&&(n.startAngle=0),isNaN(n.endAngle)&&(n.endAngle=n.startAngle),t.isGaugeType(n.data)&&(f=Math.PI/(u-i),e=n.value<i?0:n.value<u?n.value-i:u-i,n.startAngle=Math.PI/-2,n.endAngle=n.startAngle+f*e),r?n:null};t.getSvgArc=function(){var n=this,t=n.d3.svg.arc().outerRadius(n.radius).innerRadius(n.innerRadius),i=function(i,r){var u;return r?t(i):(u=n.updateAngle(i),u?t(u):"M 0 0")};return i.centroid=t.centroid,i};t.getSvgArcExpanded=function(n){var t=this,i=t.d3.svg.arc().outerRadius(t.radiusExpanded*(n?n:1)).innerRadius(t.innerRadius);return function(n){var r=t.updateAngle(n);return r?i(r):"M 0 0"}};t.getArc=function(n,t,i){return i||this.isArcType(n.data)?this.svgArc(n,t):"M 0 0"};t.transformForArcLabel=function(n){var i,r,u,f,e,t=this,o=t.updateAngle(n),s="";return o&&!t.hasType("gauge")&&(i=this.svgArc.centroid(o),r=isNaN(i[0])?0:i[0],u=isNaN(i[1])?0:i[1],f=Math.sqrt(r*r+u*u),e=t.radius&&f?(36/t.radius>.375?1.175-36/t.radius:.8)*t.radius/f:0,s="translate("+r*e+","+u*e+")"),s};t.getArcRatio=function(n){var t=this,i=t.hasType("gauge")?Math.PI:2*Math.PI;return n?(n.endAngle-n.startAngle)/i:null};t.convertToArcData=function(n){return this.addName({id:n.data.id,value:n.value,ratio:this.getArcRatio(n),index:n.index})};t.textForArcLabel=function(n){var i,u,r,e,f,t=this;return t.shouldShowArcLabel()?(i=t.updateAngle(n),u=i?i.value:null,r=t.getArcRatio(i),e=n.data.id,t.hasType("gauge")||t.meetsArcLabelThreshold(r)?(f=t.getArcLabelFormat(),f?f(u,r,e):t.defaultArcValueFormat(u,r)):""):""};t.expandArc=function(t){var u,r=this;return r.transiting?void(u=n.setInterval(function(){r.transiting||(n.clearInterval(u),r.legend.selectAll(".c3-legend-item-focused").size()>0&&r.expandArc(t))},10)):(t=r.mapToTargetIds(t),void r.svg.selectAll(r.selectorTargets(t,"."+i.chartArc)).each(function(n){r.shouldExpand(n.data.id)&&r.d3.select(this).selectAll("path").transition().duration(50).attr("d",r.svgArcExpanded).transition().duration(100).attr("d",r.svgArcExpandedSub).each(function(n){r.isDonutType(n.data)})}))};t.unexpandArc=function(n){var t=this;t.transiting||(n=t.mapToTargetIds(n),t.svg.selectAll(t.selectorTargets(n,"."+i.chartArc)).selectAll("path").transition().duration(50).attr("d",t.svgArc),t.svg.selectAll("."+i.arc).style("opacity",1))};t.shouldExpand=function(n){var t=this,i=t.config;return t.isDonutType(n)&&i.donut_expand||t.isGaugeType(n)&&i.gauge_expand||t.isPieType(n)&&i.pie_expand};t.shouldShowArcLabel=function(){var n=this,i=n.config,t=!0;return n.hasType("donut")?t=i.donut_label_show:n.hasType("pie")&&(t=i.pie_label_show),t};t.meetsArcLabelThreshold=function(n){var t=this,i=t.config,r=t.hasType("donut")?i.donut_label_threshold:i.pie_label_threshold;return n>=r};t.getArcLabelFormat=function(){var n=this,t=n.config,i=t.pie_label_format;return n.hasType("gauge")?i=t.gauge_label_format:n.hasType("donut")&&(i=t.donut_label_format),i};t.getArcTitle=function(){var n=this;return n.hasType("donut")?n.config.donut_title:""};t.updateTargetsForArc=function(n){var u,r,t=this,e=t.main,f=t.classChartArc.bind(t),o=t.classArcs.bind(t),s=t.classFocus.bind(t);u=e.select("."+i.chartArcs).selectAll("."+i.chartArc).data(t.pie(n)).attr("class",function(n){return f(n)+s(n.data)});r=u.enter().append("g").attr("class",f);r.append("g").attr("class",o);r.append("text").attr("dy",t.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};t.initArc=function(){var n=this;n.arcs=n.main.select("."+i.chart).append("g").attr("class",i.chartArcs).attr("transform",n.getTranslate("arc"));n.arcs.append("text").attr("class",i.chartArcsTitle).style("text-anchor","middle").text(n.getArcTitle())};t.redrawArc=function(n,t,r){var e,u=this,s=u.d3,f=u.config,o=u.main;e=o.selectAll("."+i.arcs).selectAll("."+i.arc).data(u.arcData.bind(u));e.enter().append("path").attr("class",u.classArc.bind(u)).style("fill",function(n){return u.color(n.data)}).style("cursor",function(n){return f.interaction_enabled&&f.data_selection_isselectable(n)?"pointer":null}).style("opacity",0).each(function(n){u.isGaugeType(n.data)&&(n.startAngle=n.endAngle=Math.PI/-2);this._current=n});e.attr("transform",function(n){return!u.isGaugeType(n.data)&&r?"scale(0)":""}).style("opacity",function(n){return n===this._current?0:1}).on("mouseover",f.interaction_enabled?function(n){var t,i;u.transiting||(t=u.updateAngle(n),i=u.convertToArcData(t),u.expandArc(t.data.id),u.api.focus(t.data.id),u.toggleFocusLegend(t.data.id,!0),u.config.data_onmouseover(i,this))}:null).on("mousemove",f.interaction_enabled?function(n){var t=u.updateAngle(n),i=u.convertToArcData(t),r=[i];u.showTooltip(r,this)}:null).on("mouseout",f.interaction_enabled?function(n){var t,i;u.transiting||(t=u.updateAngle(n),i=u.convertToArcData(t),u.unexpandArc(t.data.id),u.api.revert(),u.revertLegend(),u.hideTooltip(),u.config.data_onmouseout(i,this))}:null).on("click",f.interaction_enabled?function(n,t){var r=u.updateAngle(n),i=u.convertToArcData(r);u.toggleShape&&u.toggleShape(this,i,t);u.config.data_onclick.call(u.api,i,this)}:null).each(function(){u.transiting=!0}).transition().duration(n).attrTween("d",function(n){var t,i=u.updateAngle(n);return i?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),t=s.interpolate(this._current,i),this._current=t(0),function(i){var r=t(i);return r.data=n.data,u.getArc(r,!0)}):function(){return"M 0 0"}}).attr("transform",r?"scale(1)":"").style("fill",function(n){return u.levelColor?u.levelColor(n.data.values[0].value):u.color(n.data.id)}).style("opacity",1).call(u.endall,function(){u.transiting=!1});e.exit().transition().duration(t).style("opacity",0).remove();o.selectAll("."+i.chartArc).select("text").style("opacity",0).attr("class",function(n){return u.isGaugeType(n.data)?i.gaugeValue:""}).text(u.textForArcLabel.bind(u)).attr("transform",u.transformForArcLabel.bind(u)).style("font-size",function(n){return u.isGaugeType(n.data)?Math.round(u.radius/5)+"px":""}).transition().duration(n).style("opacity",function(n){return u.isTargetToShow(n.data.id)&&u.isArcType(n.data)?1:0});o.select("."+i.chartArcsTitle).style("opacity",u.hasType("donut")||u.hasType("gauge")?1:0);u.hasType("gauge")&&(u.arcs.select("."+i.chartArcsBackground).attr("d",function(){var n={data:[{value:f.gauge_max}],startAngle:Math.PI/-2,endAngle:Math.PI/2};return u.getArc(n,!0,!0)}),u.arcs.select("."+i.chartArcsGaugeUnit).attr("dy",".75em").text(f.gauge_label_show?f.gauge_units:""),u.arcs.select("."+i.chartArcsGaugeMin).attr("dx",-1*(u.innerRadius+(u.radius-u.innerRadius)/2)+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_min:""),u.arcs.select("."+i.chartArcsGaugeMax).attr("dx",u.innerRadius+(u.radius-u.innerRadius)/2+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_max:""))};t.initGauge=function(){var n=this.arcs;this.hasType("gauge")&&(n.append("path").attr("class",i.chartArcsBackground),n.append("text").attr("class",i.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),n.append("text").attr("class",i.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),n.append("text").attr("class",i.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};t.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};t.initRegion=function(){var n=this;n.region=n.main.append("g").attr("clip-path",n.clipPath).attr("class",i.regions)};t.updateRegion=function(n){var t=this,r=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible");t.mainRegion=t.main.select("."+i.regions).selectAll("."+i.region).data(r.regions);t.mainRegion.enter().append("g").attr("class",t.classRegion.bind(t)).append("rect").style("fill-opacity",0);t.mainRegion.exit().transition().duration(n).style("opacity",0).remove()};t.redrawRegion=function(n){var t=this,i=t.mainRegion.selectAll("rect"),r=t.regionX.bind(t),u=t.regionY.bind(t),e=t.regionWidth.bind(t),o=t.regionHeight.bind(t);return[(n?i.transition():i).attr("x",r).attr("y",u).attr("width",e).attr("height",o).style("fill-opacity",function(n){return f(n.opacity)?n.opacity:.1})]};t.regionX=function(n){var t=this,i=t.config,r="y"===n.axis?t.y:t.y2;return"y"===n.axis||"y2"===n.axis?i.axis_rotated&&"start"in n?r(n.start):0:i.axis_rotated?0:"start"in n?t.x(t.isTimeSeries()?t.parseDate(n.start):n.start):0};t.regionY=function(n){var t=this,i=t.config,r="y"===n.axis?t.y:t.y2;return"y"===n.axis||"y2"===n.axis?i.axis_rotated?0:"end"in n?r(n.end):0:i.axis_rotated&&"start"in n?t.x(t.isTimeSeries()?t.parseDate(n.start):n.start):0};t.regionWidth=function(n){var i,t=this,r=t.config,u=t.regionX(n),f="y"===n.axis?t.y:t.y2;return i="y"===n.axis||"y2"===n.axis?r.axis_rotated&&"end"in n?f(n.end):t.width:r.axis_rotated?t.width:"end"in n?t.x(t.isTimeSeries()?t.parseDate(n.end):n.end):t.width,u>i?0:i-u};t.regionHeight=function(n){var i,t=this,r=t.config,u=this.regionY(n),f="y"===n.axis?t.y:t.y2;return i="y"===n.axis||"y2"===n.axis?r.axis_rotated?t.height:"start"in n?f(n.start):t.height:r.axis_rotated&&"end"in n?t.x(t.isTimeSeries()?t.parseDate(n.end):n.end):t.height,u>i?0:i-u};t.isRegionOnX=function(n){return!n.axis||"x"===n.axis};t.drag=function(n){var s,h,c,l,u,e,f,o,t=this,r=t.config,a=t.main,v=t.d3;t.hasArcType()||r.data_selection_enabled&&(!r.zoom_enabled||t.zoom.altDomain)&&r.data_selection_multiple&&(s=t.dragStart[0],h=t.dragStart[1],c=n[0],l=n[1],u=Math.min(s,c),e=Math.max(s,c),f=r.data_selection_grouped?t.margin.top:Math.min(h,l),o=r.data_selection_grouped?t.height:Math.max(h,l),a.select("."+i.dragarea).attr("x",u).attr("y",f).attr("width",e-u).attr("height",o-f),a.selectAll("."+i.shapes).selectAll("."+i.shape).filter(function(n){return r.data_selection_isselectable(n)}).each(function(n,r){var h,c,p,w,a,l,s=v.select(this),b=s.classed(i.SELECTED),k=s.classed(i.INCLUDED),y=!1;if(s.classed(i.circle))h=1*s.attr("cx"),c=1*s.attr("cy"),a=t.togglePoint,y=h>u&&e>h&&c>f&&o>c;else{if(!s.classed(i.bar))return;l=ut(this);h=l.x;c=l.y;p=l.width;w=l.height;a=t.togglePath;y=!(h>e||u>h+p||c>o||f>c+w)}y^k&&(s.classed(i.INCLUDED,!k),s.classed(i.SELECTED,!b),a.call(t,!b,s,n,r))}))};t.dragstart=function(n){var t=this,r=t.config;t.hasArcType()||r.data_selection_enabled&&(t.dragStart=n,t.main.select("."+i.chart).append("rect").attr("class",i.dragarea).style("opacity",.1),t.dragging=!0)};t.dragend=function(){var n=this,t=n.config;n.hasArcType()||t.data_selection_enabled&&(n.main.select("."+i.dragarea).transition().duration(100).style("opacity",0).remove(),n.main.selectAll("."+i.shape).classed(i.INCLUDED,!1),n.dragging=!1)};t.selectPoint=function(n,t,r){var u=this,f=u.config,e=(f.axis_rotated?u.circleY:u.circleX).bind(u),o=(f.axis_rotated?u.circleX:u.circleY).bind(u),s=u.pointSelectR.bind(u);f.data_onselected.call(u.api,t,n.node());u.main.select("."+i.selectedCircles+u.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle+"-"+r).data([t]).enter().append("circle").attr("class",function(){return u.generateClass(i.selectedCircle,r)}).attr("cx",e).attr("cy",o).attr("stroke",function(){return u.color(t)}).attr("r",function(n){return 1.4*u.pointSelectR(n)}).transition().duration(100).attr("r",s)};t.unselectPoint=function(n,t,r){var u=this;u.config.data_onunselected(t,n.node());u.main.select("."+i.selectedCircles+u.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle+"-"+r).transition().duration(100).attr("r",0).remove()};t.togglePoint=function(n,t,i,r){n?this.selectPoint(t,i,r):this.unselectPoint(t,i,r)};t.selectPath=function(n,t){var i=this;i.config.data_onselected.call(i,t,n.node());n.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(t)).brighter(.75)})};t.unselectPath=function(n,t){var i=this;i.config.data_onunselected.call(i,t,n.node());n.transition().duration(100).style("fill",function(){return i.color(t)})};t.togglePath=function(n,t,i,r){n?this.selectPath(t,i,r):this.unselectPath(t,i,r)};t.getToggle=function(n,t){var i,r=this;return"circle"===n.nodeName?i=r.isStepType(t)?function(){}:r.togglePoint:"path"===n.nodeName&&(i=r.togglePath),i};t.toggleShape=function(n,t,r){var u=this,o=u.d3,f=u.config,e=o.select(n),s=e.classed(i.SELECTED),h=u.getToggle(n,t).bind(u);f.data_selection_enabled&&f.data_selection_isselectable(t)&&(f.data_selection_multiple||u.main.selectAll("."+i.shapes+(f.data_selection_grouped?u.getTargetSelectorSuffix(t.id):"")).selectAll("."+i.shape).each(function(n,t){var r=o.select(this);r.classed(i.SELECTED)&&h(!1,r.classed(i.SELECTED,!1),n,t)}),e.classed(i.SELECTED,!s),h(!s,e,t,r))};t.initBrush=function(){var n=this,t=n.d3;n.brush=t.svg.brush().on("brush",function(){n.redrawForBrush()});n.brush.update=function(){return n.context&&n.context.select("."+i.brush).call(this),this};n.brush.scale=function(t){return n.config.axis_rotated?this.y(t):this.x(t)}};t.initSubchart=function(){var n=this,r=n.config,t=n.context=n.svg.append("g").attr("transform",n.getTranslate("context"));t.style("visibility",r.subchart_show?"visible":"hidden");t.append("g").attr("clip-path",n.clipPathForSubchart).attr("class",i.chart);t.select("."+i.chart).append("g").attr("class",i.chartBars);t.select("."+i.chart).append("g").attr("class",i.chartLines);t.append("g").attr("clip-path",n.clipPath).attr("class",i.brush).call(n.brush);n.axes.subx=t.append("g").attr("class",i.axisX).attr("transform",n.getTranslate("subx")).attr("clip-path",r.axis_rotated?"":n.clipPathForXAxis)};t.updateTargetsForSubchart=function(n){var r,e,o,s,t=this,u=t.context,f=t.config,h=t.classChartBar.bind(t),l=t.classBars.bind(t),c=t.classChartLine.bind(t),a=t.classLines.bind(t),v=t.classAreas.bind(t);f.subchart_show&&(s=u.select("."+i.chartBars).selectAll("."+i.chartBar).data(n).attr("class",h),o=s.enter().append("g").style("opacity",0).attr("class",h),o.append("g").attr("class",l),e=u.select("."+i.chartLines).selectAll("."+i.chartLine).data(n).attr("class",c),r=e.enter().append("g").style("opacity",0).attr("class",c),r.append("g").attr("class",a),r.append("g").attr("class",v),u.selectAll("."+i.brush+" rect").attr(f.axis_rotated?"width":"height",f.axis_rotated?t.width2:t.height2))};t.updateBarForSubchart=function(n){var t=this;t.contextBar=t.context.selectAll("."+i.bars).selectAll("."+i.bar).data(t.barData.bind(t));t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color);t.contextBar.style("opacity",t.initialOpacity.bind(t));t.contextBar.exit().transition().duration(n).style("opacity",0).remove()};t.redrawBarForSubchart=function(n,t,i){(t?this.contextBar.transition().duration(i):this.contextBar).attr("d",n).style("opacity",1)};t.updateLineForSubchart=function(n){var t=this;t.contextLine=t.context.selectAll("."+i.lines).selectAll("."+i.line).data(t.lineData.bind(t));t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.contextLine.style("opacity",t.initialOpacity.bind(t));t.contextLine.exit().transition().duration(n).style("opacity",0).remove()};t.redrawLineForSubchart=function(n,t,i){(t?this.contextLine.transition().duration(i):this.contextLine).attr("d",n).style("opacity",1)};t.updateAreaForSubchart=function(n){var t=this,r=t.d3;t.contextArea=t.context.selectAll("."+i.areas).selectAll("."+i.area).data(t.lineData.bind(t));t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+r.select(this).style("opacity"),0});t.contextArea.style("opacity",0);t.contextArea.exit().transition().duration(n).style("opacity",0).remove()};t.redrawAreaForSubchart=function(n,t,i){(t?this.contextArea.transition().duration(i):this.contextArea).attr("d",n).style("fill",this.color).style("opacity",this.orgAreaOpacity)};t.redrawSubchart=function(n,t,i,r,u,f,e){var s,h,c,o=this,l=o.d3,a=o.config;o.context.style("visibility",a.subchart_show?"visible":"hidden");a.subchart_show&&(l.event&&"zoom"===l.event.type&&o.brush.extent(o.x.orgDomain()).update(),n&&(o.brush.empty()||o.brush.extent(o.x.orgDomain()).update(),s=o.generateDrawArea(u,!0),h=o.generateDrawBar(f,!0),c=o.generateDrawLine(e,!0),o.updateBarForSubchart(i),o.updateLineForSubchart(i),o.updateAreaForSubchart(i),o.redrawBarForSubchart(h,i,i),o.redrawLineForSubchart(c,i,i),o.redrawAreaForSubchart(s,i,i)))};t.redrawForBrush=function(){var n=this,t=n.x;n.redraw({withTransition:!1,withY:n.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1});n.config.subchart_onbrush.call(n.api,t.orgDomain())};t.transformContext=function(n,t){var r,u=this;t&&t.axisSubX?r=t.axisSubX:(r=u.context.select("."+i.axisX),n&&(r=r.transition()));u.context.attr("transform",u.getTranslate("context"));r.attr("transform",u.getTranslate("subx"))};t.getDefaultExtent=function(){var n=this,i=n.config,t=a(i.axis_x_extent)?i.axis_x_extent(n.getXDomain(n.data.targets)):i.axis_x_extent;return n.isTimeSeries()&&(t=[n.parseDate(t[0]),n.parseDate(t[1])]),t};t.initZoom=function(){var r,n=this,t=n.d3,i=n.config;n.zoom=t.behavior.zoom().on("zoomstart",function(){r=t.event.sourceEvent;n.zoom.altDomain=t.event.sourceEvent.altKey?n.x.orgDomain():null;i.zoom_onzoomstart.call(n.api,t.event.sourceEvent)}).on("zoom",function(){n.redrawForZoom.call(n)}).on("zoomend",function(){var u=t.event.sourceEvent;u&&r.clientX===u.clientX&&r.clientY===u.clientY||(n.redrawEventRect(),n.updateZoom(),i.zoom_onzoomend.call(n.api,n.x.orgDomain()))});n.zoom.scale=function(n){return i.axis_rotated?this.y(n):this.x(n)};n.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]};n.zoom.updateScaleExtent=function(){var t=v(n.x.orgDomain())/v(n.orgXDomain),i=this.orgScaleExtent();return this.scaleExtent([i[0]*t,i[1]*t]),this}};t.updateZoom=function(){var n=this,t=n.config.zoom_enabled?n.zoom:function(){};n.main.select("."+i.zoomRect).call(t).on("dblclick.zoom",null);n.main.selectAll("."+i.eventRect).call(t).on("dblclick.zoom",null)};t.redrawForZoom=function(){var n=this,u=n.d3,i=n.config,r=n.zoom,t=n.x;if(i.zoom_enabled&&0!==n.filterTargetsToShow(n.data.targets).length){if("mousemove"===u.event.sourceEvent.type&&r.altDomain)return t.domain(r.altDomain),void r.scale(t).updateScaleExtent();n.isCategorized()&&t.orgDomain()[0]===n.orgXDomain[0]&&t.domain([n.orgXDomain[0]-1e-10,t.orgDomain()[1]]);n.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1});"mousemove"===u.event.sourceEvent.type&&(n.cancelClick=!0);i.zoom_onzoom.call(n.api,t.orgDomain())}};t.generateColor=function(){var r=this,t=r.config,e=r.d3,n=t.data_colors,u=h(t.color_pattern)?t.color_pattern:e.scale.category10().range(),f=t.data_color,i=[];return function(t){var e,r=t.id||t.data&&t.data.id||t;return n[r]instanceof Function?e=n[r](t):n[r]?e=n[r]:(i.indexOf(r)<0&&i.push(r),e=u[i.indexOf(r)%u.length],n[r]=e),f instanceof Function?f(e,t):e}};t.generateLevelColor=function(){var u=this,t=u.config,i=t.color_pattern,n=t.color_threshold,f="value"===n.unit,r=n.values&&n.values.length?n.values:[],e=n.max||100;return h(t.color_threshold)?function(n){for(var u,o=i[i.length-1],t=0;t<r.length;t++)if(u=f?n:100*n/e,u<r[t]){o=i[t];break}return o}:null};t.getYFormat=function(n){var t=this,i=n&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,r=n&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(n,u,f){var e="y2"===t.axis.getId(f)?r:i;return e.call(t,n,u)}};t.yFormat=function(n){var t=this,i=t.config,r=i.axis_y_tick_format?i.axis_y_tick_format:t.defaultValueFormat;return r(n)};t.y2Format=function(n){var t=this,i=t.config,r=i.axis_y2_tick_format?i.axis_y2_tick_format:t.defaultValueFormat;return r(n)};t.defaultValueFormat=function(n){return f(n)?+n:""};t.defaultArcValueFormat=function(n,t){return(100*t).toFixed(1)+"%"};t.dataLabelFormat=function(n){var r=this,t=r.config.data_labels,i=function(n){return f(n)?+n:""};return"function"==typeof t.format?t.format:"object"==typeof t.format?t.format[n]?t.format[n]===!0?i:t.format[n]:function(){return""}:i};t.hasCaches=function(n){for(var t=0;t<n.length;t++)if(!(n[t]in this.cache))return!1;return!0};t.addCache=function(n,t){this.cache[n]=this.cloneTarget(t)};t.getCaches=function(n){for(var i=[],t=0;t<n.length;t++)n[t]in this.cache&&i.push(this.cloneTarget(this.cache[n[t]]));return i};i=t.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};t.generateClass=function(n,t){return" "+n+" "+n+this.getTargetSelectorSuffix(t)};t.classText=function(n){return this.generateClass(i.text,n.index)};t.classTexts=function(n){return this.generateClass(i.texts,n.id)};t.classShape=function(n){return this.generateClass(i.shape,n.index)};t.classShapes=function(n){return this.generateClass(i.shapes,n.id)};t.classLine=function(n){return this.classShape(n)+this.generateClass(i.line,n.id)};t.classLines=function(n){return this.classShapes(n)+this.generateClass(i.lines,n.id)};t.classCircle=function(n){return this.classShape(n)+this.generateClass(i.circle,n.index)};t.classCircles=function(n){return this.classShapes(n)+this.generateClass(i.circles,n.id)};t.classBar=function(n){return this.classShape(n)+this.generateClass(i.bar,n.index)};t.classBars=function(n){return this.classShapes(n)+this.generateClass(i.bars,n.id)};t.classArc=function(n){return this.classShape(n.data)+this.generateClass(i.arc,n.data.id)};t.classArcs=function(n){return this.classShapes(n.data)+this.generateClass(i.arcs,n.data.id)};t.classArea=function(n){return this.classShape(n)+this.generateClass(i.area,n.id)};t.classAreas=function(n){return this.classShapes(n)+this.generateClass(i.areas,n.id)};t.classRegion=function(n,t){return this.generateClass(i.region,t)+" "+("class"in n?n["class"]:"")};t.classEvent=function(n){return this.generateClass(i.eventRect,n.index)};t.classTarget=function(n){var t=this,r=t.config.data_classes[n],u="";return r&&(u=" "+i.target+"-"+r),t.generateClass(i.target,n)+u};t.classFocus=function(n){return this.classFocused(n)+this.classDefocused(n)};t.classFocused=function(n){return" "+(this.focusedTargetIds.indexOf(n.id)>=0?i.focused:"")};t.classDefocused=function(n){return" "+(this.defocusedTargetIds.indexOf(n.id)>=0?i.defocused:"")};t.classChartText=function(n){return i.chartText+this.classTarget(n.id)};t.classChartLine=function(n){return i.chartLine+this.classTarget(n.id)};t.classChartBar=function(n){return i.chartBar+this.classTarget(n.id)};t.classChartArc=function(n){return i.chartArc+this.classTarget(n.data.id)};t.getTargetSelectorSuffix=function(n){return n||0===n?("-"+n).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};t.selectorTarget=function(n,t){return(t||"")+"."+i.target+this.getTargetSelectorSuffix(n)};t.selectorTargets=function(n,t){var i=this;return n=n||[],n.length?n.map(function(n){return i.selectorTarget(n,t)}):null};t.selectorLegend=function(n){return"."+i.legendItem+this.getTargetSelectorSuffix(n)};t.selectorLegends=function(n){var t=this;return n&&n.length?n.map(function(n){return t.selectorLegend(n)}):null};var f=t.isValue=function(n){return n||0===n},a=t.isFunction=function(n){return"function"==typeof n},o=t.isString=function(n){return"string"==typeof n},c=t.isUndefined=function(n){return"undefined"==typeof n},s=t.isDefined=function(n){return"undefined"!=typeof n},p=t.ceil10=function(n){return 10*Math.ceil(n/10)},y=t.asHalfPixel=function(n){return Math.ceil(n)+.5},v=t.diffDomain=function(n){return n[1]-n[0]},nt=t.isEmpty=function(n){return!n||o(n)&&0===n.length||"object"==typeof n&&0===Object.keys(n).length},h=t.notEmpty=function(n){return Object.keys(n).length>0},e=t.getOption=function(n,t,i){return s(n[t])?n[t]:i},rt=t.hasValue=function(n,t){var i=!1;return Object.keys(n).forEach(function(r){n[r]===t&&(i=!0)}),i},ut=t.getPathBox=function(n){var i=n.getBoundingClientRect(),t=[n.pathSegList.getItem(0),n.pathSegList.getItem(1)],r=t[0].x,u=Math.min(t[0].y,t[1].y);return{x:r,y:u,width:i.width,height:i.height}};r.focus=function(n){var r,t=this.internal;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));this.revert();this.defocus();r.classed(i.focused,!0).classed(i.defocused,!1);t.hasArcType()&&t.expandArc(n);t.toggleFocusLegend(n,!0);t.focusedTargetIds=n;t.defocusedTargetIds=t.defocusedTargetIds.filter(function(t){return n.indexOf(t)<0})};r.defocus=function(n){var r,t=this.internal;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));r.classed(i.focused,!1).classed(i.defocused,!0);t.hasArcType()&&t.unexpandArc(n);t.toggleFocusLegend(n,!1);t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return n.indexOf(t)<0});t.defocusedTargetIds=n};r.revert=function(n){var r,t=this.internal;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n));r.classed(i.focused,!1).classed(i.defocused,!1);t.hasArcType()&&t.unexpandArc(n);t.config.legend_show&&(t.showLegend(n.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(n)).filter(function(){return t.d3.select(this).classed(i.legendItemFocused)}).classed(i.legendItemFocused,!1));t.focusedTargetIds=[];t.defocusedTargetIds=[]};r.show=function(n,t){var r,i=this.internal;n=i.mapToTargetIds(n);t=t||{};i.removeHiddenTargetIds(n);r=i.svg.selectAll(i.selectorTargets(n));r.transition().style("opacity",1,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",1)});t.withLegend&&i.showLegend(n);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};r.hide=function(n,t){var r,i=this.internal;n=i.mapToTargetIds(n);t=t||{};i.addHiddenTargetIds(n);r=i.svg.selectAll(i.selectorTargets(n));r.transition().style("opacity",0,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",0)});t.withLegend&&i.hideLegend(n);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};r.toggle=function(n,t){var i=this,r=this.internal;r.mapToTargetIds(n).forEach(function(n){r.isTargetToShow(n)?i.hide(n,t):i.show(n,t)})};r.zoom=function(n){var t=this.internal;return n&&(t.isTimeSeries()&&(n=n.map(function(n){return t.parseDate(n)})),t.brush.extent(n),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()};r.zoom.enable=function(n){var t=this.internal;t.config.zoom_enabled=n;t.updateAndRedraw()};r.unzoom=function(){var n=this.internal;n.brush.clear().update();n.redraw({withUpdateXDomain:!0})};r.load=function(n){var t=this.internal,i=t.config;return n.xs&&t.addXs(n.xs),"classes"in n&&Object.keys(n.classes).forEach(function(t){i.data_classes[t]=n.classes[t]}),"categories"in n&&t.isCategorized()&&(i.axis_x_categories=n.categories),"axes"in n&&Object.keys(n.axes).forEach(function(t){i.data_axes[t]=n.axes[t]}),"colors"in n&&Object.keys(n.colors).forEach(function(t){i.data_colors[t]=n.colors[t]}),"cacheIds"in n&&t.hasCaches(n.cacheIds)?void t.load(t.getCaches(n.cacheIds),n.done):void("unload"in n?t.unload(t.mapToTargetIds("boolean"==typeof n.unload&&n.unload?null:n.unload),function(){t.loadFromArgs(n)}):t.loadFromArgs(n))};r.unload=function(n){var t=this.internal;n=n||{};n instanceof Array?n={ids:n}:"string"==typeof n&&(n={ids:[n]});t.unload(t.mapToTargetIds(n.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});n.done&&n.done()})};r.flow=function(n){var i,c,p,l,e,u,h,y,t=this.internal,v=[],a=t.getMaxDataCount(),o=0,r=0;if(n.json)c=t.convertJsonToData(n.json,n.keys);else if(n.rows)c=t.convertRowsToData(n.rows);else{if(!n.columns)return;c=t.convertColumnsToData(n.columns)}i=t.convertDataToTargets(c,!0);t.data.targets.forEach(function(n){for(var f,e=!1,u=0;u<i.length;u++)if(n.id===i[u].id){for(e=!0,n.values[n.values.length-1]&&(r=n.values[n.values.length-1].index+1),o=i[u].values.length,f=0;o>f;f++)i[u].values[f].index=r+f,t.isTimeSeries()||(i[u].values[f].x=r+f);n.values=n.values.concat(i[u].values);i.splice(u,1);break}e||v.push(n.id)});t.data.targets.forEach(function(n){for(var i,u=0;u<v.length;u++)if(n.id===v[u])for(r=n.values[n.values.length-1].index+1,i=0;o>i;i++)n.values.push({id:n.id,index:r+i,x:t.isTimeSeries()?t.getOtherTargetX(r+i):r+i,value:null})});t.data.targets.length&&i.forEach(function(n){for(var u=[],i=t.data.targets[0].values[0].index;r>i;i++)u.push({id:n.id,index:i,x:t.isTimeSeries()?t.getOtherTargetX(i):i,value:null});n.values.forEach(function(n){n.index+=r;t.isTimeSeries()||(n.x+=r)});n.values=u.concat(n.values)});t.data.targets=t.data.targets.concat(i);p=t.getMaxDataCount();e=t.data.targets[0];u=e.values[0];s(n.to)?(o=0,y=t.isTimeSeries()?t.parseDate(n.to):n.to,e.values.forEach(function(n){n.x<y&&o++})):s(n.length)&&(o=n.length);a?1===a&&t.isTimeSeries()&&(h=(e.values[e.values.length-1].x-u.x)/2,l=[new Date(+u.x-h),new Date(+u.x+h)],t.updateXDomain(null,!0,!0,!1,l)):(h=t.isTimeSeries()?e.values.length>1?e.values[e.values.length-1].x-u.x:u.x-t.getXDomain(t.data.targets)[0]:1,l=[u.x-h,u.x],t.updateXDomain(null,!0,!0,!1,l));t.updateTargets(t.data.targets);t.redraw({flow:{index:u.index,length:o,duration:f(n.duration)?n.duration:t.config.transition_duration,done:n.done,orgDataCount:a},withLegend:!0,withTransition:a>1,withTrimXDomain:!1,withUpdateXAxis:!0})};t.generateFlow=function(n){var t=this,u=t.config,r=t.d3;return function(){var h,e,o,ft=n.targets,s=n.flow,et=n.drawBar,ot=n.drawLine,st=n.drawArea,ht=n.cx,ct=n.cy,b=n.xv,lt=n.xForText,at=n.yForText,vt=n.duration,d=1,c=s.index,l=s.length,a=t.getValueOnIndex(t.data.targets[0].values,c),y=t.getValueOnIndex(t.data.targets[0].values,c+l),p=t.x.domain(),yt=s.duration||vt,pt=s.done||function(){},f=t.generateWait(),g=t.xgrid||r.selectAll([]),w=t.xgridLines||r.selectAll([]),k=t.mainRegion||r.selectAll([]),nt=t.mainText||r.selectAll([]),tt=t.mainBar||r.selectAll([]),it=t.mainLine||r.selectAll([]),rt=t.mainArea||r.selectAll([]),ut=t.mainCircle||r.selectAll([]);t.flowing=!0;t.data.targets.forEach(function(n){n.values.splice(0,l)});o=t.updateXDomain(ft,!0,!0);t.updateXGrid&&t.updateXGrid(!0);s.orgDataCount?h=1===s.orgDataCount||a.x===y.x?t.x(p[0])-t.x(o[0]):t.isTimeSeries()?t.x(p[0])-t.x(o[0]):t.x(a.x)-t.x(y.x):1!==t.data.targets[0].values.length?h=t.x(p[0])-t.x(o[0]):t.isTimeSeries()?(a=t.getValueOnIndex(t.data.targets[0].values,0),y=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),h=t.x(a.x)-t.x(y.x)):h=v(o)/2;d=v(p)/v(o);e="translate("+h+",0) scale("+d+",1)";t.hideXGridFocus();t.hideTooltip();r.transition().ease("linear").duration(yt).each(function(){f.add(t.axes.x.transition().call(t.xAxis));f.add(tt.transition().attr("transform",e));f.add(it.transition().attr("transform",e));f.add(rt.transition().attr("transform",e));f.add(ut.transition().attr("transform",e));f.add(nt.transition().attr("transform",e));f.add(k.filter(t.isRegionOnX).transition().attr("transform",e));f.add(g.transition().attr("transform",e));f.add(w.transition().attr("transform",e))}).call(f,function(){var n,r=[],f=[],e=[];if(l){for(n=0;l>n;n++)r.push("."+i.shape+"-"+(c+n)),f.push("."+i.text+"-"+(c+n)),e.push("."+i.eventRect+"-"+(c+n));t.svg.selectAll("."+i.shapes).selectAll(r).remove();t.svg.selectAll("."+i.texts).selectAll(f).remove();t.svg.selectAll("."+i.eventRects).selectAll(e).remove();t.svg.select("."+i.xgrid).remove()}g.attr("transform",null).attr(t.xgridAttr);w.attr("transform",null);w.select("line").attr("x1",u.axis_rotated?0:b).attr("x2",u.axis_rotated?t.width:b);w.select("text").attr("x",u.axis_rotated?t.width:0).attr("y",b);tt.attr("transform",null).attr("d",et);it.attr("transform",null).attr("d",ot);rt.attr("transform",null).attr("d",st);ut.attr("transform",null).attr("cx",ht).attr("cy",ct);nt.attr("transform",null).attr("x",lt).attr("y",at).style("fill-opacity",t.opacityForText.bind(t));k.attr("transform",null);k.select("rect").filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t));u.interaction_enabled&&t.redrawEventRect();pt();t.flowing=!1})}};r.selected=function(n){var t=this.internal,r=t.d3;return r.merge(t.main.selectAll("."+i.shapes+t.getTargetSelectorSuffix(n)).selectAll("."+i.shape).filter(function(){return r.select(this).classed(i.SELECTED)}).map(function(n){return n.map(function(n){var t=n.__data__;return t.data?t.data:t})}))};r.select=function(n,t,r){var u=this.internal,e=u.d3,f=u.config;f.data_selection_enabled&&u.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(o,h){var c=e.select(this),v=o.data?o.data.id:o.id,l=u.getToggle(this,o).bind(u),y=f.data_selection_grouped||!n||n.indexOf(v)>=0,p=!t||t.indexOf(h)>=0,a=c.classed(i.SELECTED);c.classed(i.line)||c.classed(i.area)||(y&&p?f.data_selection_isselectable(o)&&!a&&l(!0,c.classed(i.SELECTED,!0),o,h):s(r)&&r&&a&&l(!1,c.classed(i.SELECTED,!1),o,h))})};r.unselect=function(n,t){var r=this.internal,f=r.d3,u=r.config;u.data_selection_enabled&&r.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(e,o){var s=f.select(this),h=e.data?e.data.id:e.id,c=r.getToggle(this,e).bind(r),l=u.data_selection_grouped||!n||n.indexOf(h)>=0,a=!t||t.indexOf(o)>=0,v=s.classed(i.SELECTED);s.classed(i.line)||s.classed(i.area)||l&&a&&u.data_selection_isselectable(e)&&v&&c(!1,s.classed(i.SELECTED,!1),e,o)})};r.transform=function(n,t){var i=this.internal,r=["pie","donut"].indexOf(n)>=0?{withTransform:!0}:null;i.transformTo(t,n,r)};t.transformTo=function(n,t,i){var r=this,f=!r.hasArcType(),u=i||{withTransitionForAxis:f};u.withTransitionForTransform=!1;r.transiting=!1;r.setTargetType(n,t);r.updateTargets(r.data.targets);r.updateAndRedraw(u)};r.groups=function(n){var i=this.internal,t=i.config;return c(n)?t.data_groups:(t.data_groups=n,i.redraw(),t.data_groups)};r.xgrids=function(n){var i=this.internal,t=i.config;return n?(t.grid_x_lines=n,i.redrawWithoutRescale(),t.grid_x_lines):t.grid_x_lines};r.xgrids.add=function(n){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(n?n:[]))};r.xgrids.remove=function(n){var t=this.internal;t.removeGridLines(n,!0)};r.ygrids=function(n){var i=this.internal,t=i.config;return n?(t.grid_y_lines=n,i.redrawWithoutRescale(),t.grid_y_lines):t.grid_y_lines};r.ygrids.add=function(n){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(n?n:[]))};r.ygrids.remove=function(n){var t=this.internal;t.removeGridLines(n,!1)};r.regions=function(n){var i=this.internal,t=i.config;return n?(t.regions=n,i.redrawWithoutRescale(),t.regions):t.regions};r.regions.add=function(n){var i=this.internal,t=i.config;return n?(t.regions=t.regions.concat(n),i.redrawWithoutRescale(),t.regions):t.regions};r.regions.remove=function(n){var u,f,e,t=this.internal,r=t.config;return n=n||{},u=t.getOption(n,"duration",r.transition_duration),f=t.getOption(n,"classes",[i.region]),e=t.main.select("."+i.regions).selectAll(f.map(function(n){return"."+n})),(u?e.transition().duration(u):e).style("opacity",0).remove(),r.regions=r.regions.filter(function(n){var t=!1;return n["class"]?(n["class"].split(" ").forEach(function(n){f.indexOf(n)>=0&&(t=!0)}),!t):!0}),r.regions};r.data=function(n){var t=this.internal.data.targets;return"undefined"==typeof n?t:t.filter(function(t){return[].concat(n).indexOf(t.id)>=0})};r.data.shown=function(n){return this.internal.filterTargetsToShow(this.data(n))};r.data.values=function(n){var t,i=null;return n&&(t=this.data(n),i=t[0]?t[0].values.map(function(n){return n.value}):null),i};r.data.names=function(n){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",n)};r.data.colors=function(n){return this.internal.updateDataAttributes("colors",n)};r.data.axes=function(n){return this.internal.updateDataAttributes("axes",n)};r.category=function(n,t){var i=this.internal,r=i.config;return arguments.length>1&&(r.axis_x_categories[n]=t,i.redraw()),r.axis_x_categories[n]};r.categories=function(n){var i=this.internal,t=i.config;return arguments.length?(t.axis_x_categories=n,i.redraw(),t.axis_x_categories):t.axis_x_categories};r.color=function(n){var t=this.internal;return t.color(n)};r.x=function(n){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs};r.xs=function(n){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs};r.axis=function(){};r.axis.labels=function(n){var t=this.internal;arguments.length&&(Object.keys(n).forEach(function(i){t.axis.setLabelText(i,n[i])}),t.axis.updateLabels())};r.axis.max=function(n){var i=this.internal,t=i.config;return arguments.length?("object"==typeof n?(f(n.x)&&(t.axis_x_max=n.x),f(n.y)&&(t.axis_y_max=n.y),f(n.y2)&&(t.axis_y2_max=n.y2)):t.axis_y_max=t.axis_y2_max=n,void i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:t.axis_x_max,y:t.axis_y_max,y2:t.axis_y2_max}};r.axis.min=function(n){var i=this.internal,t=i.config;return arguments.length?("object"==typeof n?(f(n.x)&&(t.axis_x_min=n.x),f(n.y)&&(t.axis_y_min=n.y),f(n.y2)&&(t.axis_y2_min=n.y2)):t.axis_y_min=t.axis_y2_min=n,void i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:t.axis_x_min,y:t.axis_y_min,y2:t.axis_y2_min}};r.axis.range=function(n){return arguments.length?(s(n.max)&&this.axis.max(n.max),void(s(n.min)&&this.axis.min(n.min))):{max:this.axis.max(),min:this.axis.min()}};r.legend=function(){};r.legend.show=function(n){var t=this.internal;t.showLegend(t.mapToTargetIds(n));t.updateAndRedraw({withLegend:!0})};r.legend.hide=function(n){var t=this.internal;t.hideLegend(t.mapToTargetIds(n));t.updateAndRedraw({withLegend:!0})};r.resize=function(n){var i=this.internal,t=i.config;t.size_width=n?n.width:null;t.size_height=n?n.height:null;this.flush()};r.flush=function(){var n=this.internal;n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};r.destroy=function(){var t=this.internal;return n.clearInterval(t.intervalForObserveInserted),n.onresize=null,t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(n){t[n]=null}),null};r.tooltip=function(){};r.tooltip.show=function(n){var i,r,t=this.internal;n.mouse&&(r=n.mouse);n.data?t.isMultipleX()?(r=[t.x(n.data.x),t.getYScale(n.data.id)(n.data.value)],i=null):i=f(n.data.index)?n.data.index:t.getIndexByX(n.data.x):"undefined"!=typeof n.x?i=t.getIndexByX(n.x):"undefined"!=typeof n.index&&(i=n.index);t.dispatchEvent("mouseover",i,r);t.dispatchEvent("mousemove",i,r)};r.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};t.isSafari=function(){var t=n.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0};t.isChrome=function(){var t=n.navigator.userAgent;return t.indexOf("Chrome")>=0};Function.prototype.bind||(Function.prototype.bind=function(n){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t?this:n,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i});"function"==typeof define&&define.amd?define("c3",["d3"],l):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=l:n.c3=l}(window)